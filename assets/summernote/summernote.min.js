(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(window.jQuery)}}}(function(M){var y=(function(){var aB=function(aC){return function(aD){return aC===aD}};var aw=function(aD,aC){return aD===aC};var ap=function(aC){return function(aE,aD){return aE[aC]===aD[aC]}};var ay=function(){return true};var ar=function(){return false};var aq=function(aC){return function(){return !aC.apply(aC,arguments)}};var av=function(aD,aC){return function(aE){return aD(aE)&&aC(aE)}};var aA=function(aC){return aC};var at=function(aC,aD){return function(){return aC[aD].apply(aC,arguments)}};var ao=0;var ax=function(aC){var aD=++ao+"";return aC?aC+aD:aD};var an=function(aC){var aD=M(document);return{top:aC.top+aD.scrollTop(),left:aC.left+aD.scrollLeft(),width:aC.right-aC.left,height:aC.bottom-aC.top}};var au=function(aE){var aC={};for(var aD in aE){if(aE.hasOwnProperty(aD)){aC[aE[aD]]=aD}}return aC};var az=function(aC,aD){aD=aD||"";return aD+aC.split(".").map(function(aE){return aE.substring(0,1).toUpperCase()+aE.substring(1)}).join("")};return{eq:aB,eq2:aw,peq2:ap,ok:ay,fail:ar,self:aA,not:aq,and:av,invoke:at,uniqueId:ax,rect2bnd:an,invertObject:au,namespaceToCamel:az}})();var z=(function(){var aA=function(aE){return aE[0]};var aD=function(aE){return aE[aE.length-1]};var aw=function(aE){return aE.slice(0,aE.length-1)};var ax=function(aE){return aE.slice(1)};var av=function(aI,aG){for(var aF=0,aE=aI.length;aF<aE;aF++){var aH=aI[aF];if(aG(aH)){return aH}}};var aC=function(aH,aG){for(var aF=0,aE=aH.length;aF<aE;aF++){if(!aG(aH[aF])){return false}}return true};var az=function(aF,aE){return M.inArray(aE,aF)};var ao=function(aF,aE){return az(aF,aE)!==-1};var au=function(aF,aE){aE=aE||y.self;return aF.reduce(function(aH,aG){return aH+aE(aG)},0)};var aB=function(aH){var aF=[],aE=-1,aG=aH.length;while(++aE<aG){aF[aE]=aH[aE]}return aF};var ar=function(aE){return !aE||!aE.length};var aq=function(aG,aE){if(!aG.length){return[]}var aF=ax(aG);return aF.reduce(function(aJ,aI){var aH=aD(aJ);if(aE(aD(aH),aI)){aH[aH.length]=aI}else{aJ[aJ.length]=[aI]}return aJ},[[aA(aG)]])};var ay=function(aH){var aG=[];for(var aF=0,aE=aH.length;aF<aE;aF++){if(aH[aF]){aG.push(aH[aF])}}return aG};var ap=function(aH){var aG=[];for(var aF=0,aE=aH.length;aF<aE;aF++){if(!ao(aG,aH[aF])){aG.push(aH[aF])}}return aG};var at=function(aG,aF){var aE=az(aG,aF);if(aE===-1){return null}return aG[aE+1]};var an=function(aG,aF){var aE=az(aG,aF);if(aE===-1){return null}return aG[aE-1]};return{head:aA,last:aD,initial:aw,tail:ax,prev:an,next:at,find:av,contains:ao,all:aC,sum:au,from:aB,isEmpty:ar,clusterBy:aq,compact:ay,unique:ap}})();var E=typeof define==="function"&&define.amd;var o=function(ap){var ar=ap==="Comic Sans MS"?"Courier New":"Comic Sans MS";var an=M("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body);var aq=an.css("fontFamily",ar).width();var ao=an.css("fontFamily",ap+","+ar).width();an.remove();return aq!==ao};var N=navigator.userAgent;var j=/MSIE|Trident/i.test(N);var aa;if(j){var c=/MSIE (\d+[.]\d+)/.exec(N);if(c){aa=parseFloat(c[1])}c=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(N);if(c){aa=parseFloat(c[1])}}var X=/Edge\/\d+/.test(N);var aj={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:j,isEdge:X,isFF:!X&&/firefox/i.test(N),isPhantom:/PhantomJS/i.test(N),isWebkit:!X&&/webkit/i.test(N),isChrome:!X&&/chrome/i.test(N),isSafari:!X&&/safari/i.test(N),browserVersion:aa,jqueryVersion:parseFloat(M.fn.jquery),isSupportAmd:E,hasCodeMirror:E?require.specified("codemirror"):!!window.CodeMirror,isFontInstalled:o,isW3CRangeSupport:!!document.createRange};var am=String.fromCharCode(160);var Y="\ufeff";var d=(function(){var bd=function(by){return by&&M(by).hasClass("note-editable")};var bu=function(by){return by&&M(by).hasClass("note-control-sizing")};var aY=function(by){by=by.toUpperCase();return function(bz){return bz&&bz.nodeName.toUpperCase()===by}};var a9=function(by){return by&&by.nodeType===3};var ba=function(by){return by&&by.nodeType===1};var br=function(by){return by&&/^BR|^IMG|^HR|^IFRAME|^BUTTON/.test(by.nodeName.toUpperCase())};var bi=function(by){if(bd(by)){return false}return by&&/^DIV|^P|^LI|^H[1-7]/.test(by.nodeName.toUpperCase())};var aS=function(by){return by&&/^H[1-7]/.test(by.nodeName.toUpperCase())};var bc=aY("PRE");var aG=aY("LI");var bb=function(by){return bi(by)&&!aG(by)};var bn=aY("TABLE");var aO=function(by){return !aJ(by)&&!ax(by)&&!bp(by)&&!bi(by)&&!bn(by)&&!bl(by)};var ax=function(by){return by&&/^UL|^OL/.test(by.nodeName.toUpperCase())};var bp=aY("HR");var aC=function(by){return by&&/^TD|^TH/.test(by.nodeName.toUpperCase())};var bl=aY("BLOCKQUOTE");var aJ=function(by){return aC(by)||bl(by)||bd(by)};var a8=aY("A");var ap=function(by){return aO(by)&&!!bm(by,bi)};var aP=function(by){return aO(by)&&!bm(by,bi)};var at=aY("BODY");var bf=function(bz,by){return bz.nextSibling===by||bz.previousSibling===by};var aQ=function(bz,by){by=by||y.ok;var bA=[];if(bz.previousSibling&&by(bz.previousSibling)){bA.push(bz.previousSibling)}bA.push(bz);if(bz.nextSibling&&by(bz.nextSibling)){bA.push(bz.nextSibling)}return bA};var aT=aj.isMSIE&&aj.browserVersion<11?"&nbsp;":"<br>";var bv=function(by){if(a9(by)){return by.nodeValue.length}return by.childNodes.length};var aw=function(bz){var by=bv(bz);if(by===0){return true}else{if(!a9(bz)&&by===1&&bz.innerHTML===aT){return true}else{if(z.all(bz.childNodes,a9)&&bz.innerHTML===""){return true}}}return false};var bx=function(by){if(!br(by)&&!bv(by)){by.innerHTML=aT}};var bm=function(bz,by){while(bz){if(by(bz)){return bz}if(bd(bz)){break}bz=bz.parentNode}return null};var aE=function(bz,by){bz=bz.parentNode;while(bz){if(bv(bz)!==1){break}if(by(bz)){return bz}if(bd(bz)){break}bz=bz.parentNode}return null};var aM=function(bA,by){by=by||y.fail;var bz=[];bm(bA,function(bB){if(!bd(bB)){bz.push(bB)}return by(bB)});return bz};var aF=function(bA,by){var bz=aM(bA);return z.last(bz.filter(by))};var a7=function(bA,bz){var by=aM(bA);for(var bB=bz;bB;bB=bB.parentNode){if(M.inArray(bB,by)>-1){return bB}}return null};var aK=function(bA,bz){bz=bz||y.fail;var by=[];while(bA){if(bz(bA)){break}by.push(bA);bA=bA.previousSibling}return by};var a3=function(bA,bz){bz=bz||y.fail;var by=[];while(bA){if(bz(bA)){break}by.push(bA);bA=bA.nextSibling}return by};var aq=function(bz,by){var bB=[];by=by||y.ok;(function bA(bE){if(bz!==bE&&by(bE)){bB.push(bE)}for(var bD=0,bC=bE.childNodes.length;bD<bC;bD++){bA(bE.childNodes[bD])}})(bz);return bB};var aD=function(bA,bz){var by=bA.parentNode;var bB=M("<"+bz+">")[0];by.insertBefore(bB,bA);bB.appendChild(bA);return bB};var aI=function(bB,bA){var bz=bA.nextSibling,by=bA.parentNode;if(bz){by.insertBefore(bB,bz)}else{by.appendChild(bB)}return bB};var aU=function(by,bz){M.each(bz,function(bA,bB){by.appendChild(bB)});return by};var bt=function(by){return by.offset===0};var be=function(by){return by.offset===bv(by.node)};var bj=function(by){return bt(by)||be(by)};var au=function(bz,by){while(bz&&bz!==by){if(bh(bz)!==0){return false}bz=bz.parentNode}return true};var av=function(bz,by){while(bz&&bz!==by){if(bh(bz)!==bv(bz.parentNode)-1){return false}bz=bz.parentNode}return true};var bw=function(by,bz){return bt(by)&&au(by.node,bz)};var aH=function(by,bz){return be(by)&&av(by.node,bz)};var bh=function(by){var bz=0;while((by=by.previousSibling)){bz+=1}return bz};var an=function(by){return !!(by&&by.childNodes&&by.childNodes.length)};var ay=function(by,bz){var bA,bB;if(by.offset===0){if(bd(by.node)){return null}bA=by.node.parentNode;bB=bh(by.node)}else{if(an(by.node)){bA=by.node.childNodes[by.offset-1];bB=bv(bA)}else{bA=by.node;bB=bz?0:by.offset-1}}return{node:bA,offset:bB}};var aW=function(by,bz){var bA,bB;if(bv(by.node)===by.offset){if(bd(by.node)){return null}bA=by.node.parentNode;bB=bh(by.node)+1}else{if(an(by.node)){bA=by.node.childNodes[by.offset];bB=0}else{bA=by.node;bB=bz?bv(by.node):by.offset+1}}return{node:bA,offset:bB}};var bq=function(by,bz){return by.node===bz.node&&by.offset===bz.offset};var aN=function(by){if(a9(by.node)||!an(by.node)||aw(by.node)){return true}var bA=by.node.childNodes[by.offset-1];var bz=by.node.childNodes[by.offset];if((!bA||br(bA))&&(!bz||br(bz))){return true}return false};var a0=function(by,bz){while(by){if(bz(by)){return by}by=ay(by)}return null};var aL=function(by,bz){while(by){if(bz(by)){return by}by=aW(by)}return null};var bg=function(by){if(!a9(by.node)){return false}var bz=by.node.nodeValue.charAt(by.offset-1);return bz&&(bz!==" "&&bz!==am)};var a5=function(bD,bA,bB,bz){var by=bD;while(by){bB(by);if(bq(by,bA)){break}var bC=bz&&bD.node!==by.node&&bA.node!==by.node;by=aW(by,bC)}};var a2=function(by,bA){var bz=aM(bA,y.eq(by));return bz.map(bh).reverse()};var bs=function(bA,bB){var bC=bA;for(var bz=0,by=bB.length;bz<by;bz++){if(bC.childNodes.length<=bB[bz]){bC=bC.childNodes[bC.childNodes.length-1]}else{bC=bC.childNodes[bB[bz]]}}return bC};var az=function(by,bA){var bC=bA&&bA.isSkipPaddingBlankHTML;var bz=bA&&bA.isNotSplitEdgePoint;if(bj(by)&&(a9(by.node)||bz)){if(bt(by)){return by.node}else{if(be(by)){return by.node.nextSibling}}}if(a9(by.node)){return by.node.splitText(by.offset)}else{var bB=by.node.childNodes[by.offset];var bD=aI(by.node.cloneNode(false),by.node);aU(bD,a3(bB));if(!bC){bx(by.node);bx(bD)}return bD}};var ar=function(bz,by,bA){var bB=aM(by.node,y.eq(bz));if(!bB.length){return null}else{if(bB.length===1){return az(by,bA)}}return bB.reduce(function(bD,bC){if(bD===by.node){bD=az(by,bA)}return az({node:bC,offset:bD?d.position(bD):bv(bC)},bA)})};var aA=function(by,bD){var bB=bD?bi:aJ;var bC=aM(by.node,bB);var bF=z.last(bC)||by.node;var bE,bA;if(bB(bF)){bE=bC[bC.length-2];bA=bF}else{bE=bF;bA=bE.parentNode}var bz=bE&&ar(bE,by,{isSkipPaddingBlankHTML:bD,isNotSplitEdgePoint:bD});if(!bz&&bA===by.node){bz=by.node.childNodes[by.offset]}return{rightNode:bz,container:bA}};var aB=function(by){return document.createElement(by)};var a6=function(by){return document.createTextNode(by)};var aV=function(bC,bD){if(!bC||!bC.parentNode){return}if(bC.removeNode){return bC.removeNode(bD)}var bB=bC.parentNode;if(!bD){var bz=[];var bA,by;for(bA=0,by=bC.childNodes.length;bA<by;bA++){bz.push(bC.childNodes[bA])}for(bA=0,by=bz.length;bA<by;bA++){bB.insertBefore(bz[bA],bC)}}bB.removeChild(bC)};var ao=function(bA,by){while(bA){if(bd(bA)||!by(bA)){break}var bz=bA.parentNode;aV(bA);bA=bz}};var aZ=function(bz,bA){if(bz.nodeName.toUpperCase()===bA.toUpperCase()){return bz}var by=aB(bA);if(bz.style.cssText){by.style.cssText=bz.style.cssText}aU(by,z.from(bz.childNodes));aI(by,bz);aV(bz);return by};var aX=aY("TEXTAREA");var aR=function(bz,by){var bA=aX(bz[0])?bz.val():bz.html();if(by){return bA.replace(/[\n\r]/g,"")}return bA};var bo=function(bz,bA){var by=aR(bz);if(bA){var bB=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;by=by.replace(bB,function(bD,bG,bC){bC=bC.toUpperCase();var bF=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(bC)&&!!bG;var bE=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(bC);return bD+((bF||bE)?"\n":"")});by=M.trim(by)}return by};var a1=function(bA){var bz=M(bA);var bB=bz.offset();var by=bz.outerHeight(true);return{left:bB.left,top:bB.top+by}};var bk=function(by,bz){Object.keys(bz).forEach(function(bA){by.on(bA,bz[bA])})};var a4=function(by,bz){Object.keys(bz).forEach(function(bA){by.off(bA,bz[bA])})};return{NBSP_CHAR:am,ZERO_WIDTH_NBSP_CHAR:Y,blank:aT,emptyPara:"<p>"+aT+"</p>",makePredByNodeName:aY,isEditable:bd,isControlSizing:bu,isText:a9,isElement:ba,isVoid:br,isPara:bi,isPurePara:bb,isHeading:aS,isInline:aO,isBlock:y.not(aO),isBodyInline:aP,isBody:at,isParaInline:ap,isPre:bc,isList:ax,isTable:bn,isCell:aC,isBlockquote:bl,isBodyContainer:aJ,isAnchor:a8,isDiv:aY("DIV"),isLi:aG,isBR:aY("BR"),isSpan:aY("SPAN"),isB:aY("B"),isU:aY("U"),isS:aY("S"),isI:aY("I"),isImg:aY("IMG"),isTextarea:aX,isEmpty:aw,isEmptyAnchor:y.and(a8,aw),isClosestSibling:bf,withClosestSiblings:aQ,nodeLength:bv,isLeftEdgePoint:bt,isRightEdgePoint:be,isEdgePoint:bj,isLeftEdgeOf:au,isRightEdgeOf:av,isLeftEdgePointOf:bw,isRightEdgePointOf:aH,prevPoint:ay,nextPoint:aW,isSamePoint:bq,isVisiblePoint:aN,prevPointUntil:a0,nextPointUntil:aL,isCharPoint:bg,walkPoint:a5,ancestor:bm,singleChildAncestor:aE,listAncestor:aM,lastAncestor:aF,listNext:a3,listPrev:aK,listDescendant:aq,commonAncestor:a7,wrap:aD,insertAfter:aI,appendChildNodes:aU,position:bh,hasChildren:an,makeOffsetPath:a2,fromOffsetPath:bs,splitTree:ar,splitPoint:aA,create:aB,createText:a6,remove:aV,removeWhile:ao,replace:aZ,html:bo,value:aR,posFromPlaceholder:a1,attachEvents:bk,detachEvents:a4}})();var ai=function(an,ap){var ao=this;var aq=M.summernote.ui;this.memos={};this.modules={};this.layoutInfo={};this.options=ap;this.initialize=function(){this.layoutInfo=aq.createLayout(an,ap);this._initialize();an.hide();return this};this.destroy=function(){this._destroy();an.removeData("summernote");aq.removeLayout(an,this.layoutInfo)};this.reset=function(){var ar=ao.isDisabled();this.code(d.emptyPara);this._destroy();this._initialize();if(ar){ao.disable()}};this._initialize=function(){var at=M.extend({},this.options.buttons);Object.keys(at).forEach(function(au){ao.memo("button."+au,at[au])});var ar=M.extend({},this.options.modules,M.summernote.plugins||{});Object.keys(ar).forEach(function(au){ao.module(au,ar[au],true)});Object.keys(this.modules).forEach(function(au){ao.initializeModule(au)})};this._destroy=function(){Object.keys(this.modules).reverse().forEach(function(ar){ao.removeModule(ar)});Object.keys(this.memos).forEach(function(ar){ao.removeMemo(ar)})};this.code=function(at){var ar=this.invoke("codeview.isActivated");if(at===undefined){this.invoke("codeview.sync");return ar?this.layoutInfo.codable.val():this.layoutInfo.editable.html()}else{if(ar){this.layoutInfo.codable.val(at)}else{this.layoutInfo.editable.html(at)}an.val(at);this.triggerEvent("change",at)}};this.isDisabled=function(){return this.layoutInfo.editable.attr("contenteditable")==="false"};this.enable=function(){this.layoutInfo.editable.attr("contenteditable",true);this.invoke("toolbar.activate",true)};this.disable=function(){if(this.invoke("codeview.isActivated")){this.invoke("codeview.deactivate")}this.layoutInfo.editable.attr("contenteditable",false);this.invoke("toolbar.deactivate",true)};this.triggerEvent=function(){var at=z.head(arguments);var ar=z.tail(z.from(arguments));var au=this.options.callbacks[y.namespaceToCamel(at,"on")];if(au){au.apply(an[0],ar)}an.trigger("summernote."+at,ar)};this.initializeModule=function(at){var ar=this.modules[at];ar.shouldInitialize=ar.shouldInitialize||y.ok;if(!ar.shouldInitialize()){return}if(ar.initialize){ar.initialize()}if(ar.events){d.attachEvents(an,ar.events)}};this.module=function(au,at,ar){if(arguments.length===1){return this.modules[au]}this.modules[au]=new at(this);if(!ar){this.initializeModule(au)}};this.removeModule=function(at){var ar=this.modules[at];if(ar.shouldInitialize()){if(ar.events){d.detachEvents(an,ar.events)}if(ar.destroy){ar.destroy()}}delete this.modules[at]};this.memo=function(ar,at){if(arguments.length===1){return this.memos[ar]}this.memos[ar]=at};this.removeMemo=function(ar){if(this.memos[ar]&&this.memos[ar].destroy){this.memos[ar].destroy()}delete this.memos[ar]};this.createInvokeHandler=function(ar,at){return function(au){au.preventDefault();ao.invoke(ar,at||M(au.target).closest("[data-value]").data("value"))}};this.invoke=function(){var aw=z.head(arguments);var au=z.tail(z.from(arguments));var ay=aw.split(".");var ax=ay.length>1;var at=ax&&z.head(ay);var ar=ax?z.last(ay):z.head(ay);var av=this.modules[at||"editor"];if(!at&&this[ar]){return this[ar].apply(this,au)}else{if(av&&av[ar]&&av.shouldInitialize()){return av[ar].apply(av,au)}}};return this.initialize()};M.fn.extend({summernote:function(){var aq=M.type(z.head(arguments));var at=aq==="string";var ar=aq==="object";var ao=ar?z.head(arguments):{};ao=M.extend({},M.summernote.options,ao);ao.langInfo=M.extend(true,{},M.summernote.lang["en-US"],M.summernote.lang[ao.lang]);this.each(function(au,ax){var av=M(ax);if(!av.data("summernote")){var aw=new ai(av,ao);av.data("summernote",aw);av.data("summernote").triggerEvent("init",aw.layoutInfo)}});var an=this.first();if(an.length){var ap=an.data("summernote");if(at){return ap.invoke.apply(ap,z.from(arguments))}else{if(ao.focus){ap.invoke("editor.focus")}}}return this}});var i=function(an,ap,ao,aq){this.render=function(at){var ar=M(an);if(ao&&ao.contents){ar.html(ao.contents)}if(ao&&ao.className){ar.addClass(ao.className)}if(ao&&ao.data){M.each(ao.data,function(aw,av){ar.attr("data-"+aw,av)})}if(ao&&ao.click){ar.on("click",ao.click)}if(ap){var au=ar.find(".note-children-container");ap.forEach(function(av){av.render(au.length?au:ar)})}if(aq){aq(ar,ao)}if(ao&&ao.callback){ao.callback(ar)}if(at){at.append(ar)}return ar}};var Q={create:function(an,ao){return function(){var aq=M.isArray(arguments[0])?arguments[0]:[];var ap=typeof arguments[1]==="object"?arguments[1]:arguments[0];if(ap&&ap.children){aq=ap.children}return new i(an,aq,ap,ao)}}};var b=Q.create('<div class="note-editor note-frame panel panel-default"/>');var v=Q.create('<div class="note-toolbar panel-heading"/>');var e=Q.create('<div class="note-editing-area"/>');var u=Q.create('<textarea class="note-codable"/>');var U=Q.create('<div class="note-editable panel-body" contentEditable="true"/>');var l=Q.create(['<div class="note-statusbar">','  <div class="note-resizebar">','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>','    <div class="note-icon-bar"/>',"  </div>","</div>"].join(""));var r=Q.create('<div class="note-editor"/>');var a=Q.create('<div class="note-editable" contentEditable="true"/>');var ab=Q.create('<div class="note-btn-group btn-group">');var w=Q.create('<button type="button" class="note-btn btn btn-default btn-sm">',function(an,ao){if(ao&&ao.tooltip){an.attr({title:ao.tooltip}).tooltip({container:"body",trigger:"hover",placement:"bottom"})}});var ak=Q.create('<div class="dropdown-menu">',function(ao,ap){var an=M.isArray(ap.items)?ap.items.map(function(ar){var at=(typeof ar==="string")?ar:(ar.value||"");var aq=ap.template?ap.template(ar):ar;return'<li><a href="#" data-value="'+at+'">'+aq+"</a></li>"}).join(""):ap.items;ao.html(an)});var ac=Q.create('<div class="dropdown-menu note-check">',function(ao,ap){var an=M.isArray(ap.items)?ap.items.map(function(ar){var at=(typeof ar==="string")?ar:(ar.value||"");var aq=ap.template?ap.template(ar):ar;return'<li><a href="#" data-value="'+at+'">'+q(ap.checkClassName)+" "+aq+"</a></li>"}).join(""):ap.items;ao.html(an)});var ah=Q.create('<div class="note-color-palette"/>',function(ao,ay){var aq=[];for(var ax=0,aw=ay.colors.length;ax<aw;ax++){var at=ay.eventName;var an=ay.colors[ax];var au=[];for(var ap=0,av=an.length;ap<av;ap++){var ar=an[ap];au.push(['<button type="button" class="note-color-btn"','style="background-color:',ar,'" ','data-event="',at,'" ','data-value="',ar,'" ','title="',ar,'" ','data-toggle="button" tabindex="-1"></button>'].join(""))}aq.push('<div class="note-color-row">'+au.join("")+"</div>")}ao.html(aq.join(""));ao.find(".note-color-btn").tooltip({container:"body",trigger:"hover",placement:"bottom"})});var af=Q.create('<div class="modal" aria-hidden="false" tabindex="-1"/>',function(an,ao){if(ao.fade){an.addClass("fade")}an.html(['<div class="modal-dialog">','  <div class="modal-content">',(ao.title?'    <div class="modal-header">      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>      <h4 class="modal-title">'+ao.title+"</h4>    </div>":""),'    <div class="modal-body">'+ao.body+"</div>",(ao.footer?'    <div class="modal-footer">'+ao.footer+"</div>":""),"  </div>","</div>"].join(""))});var O=Q.create(['<div class="note-popover popover in">','  <div class="arrow"/>','  <div class="popover-content note-children-container"/>',"</div>"].join(""),function(an,ao){var ap=typeof ao.direction!=="undefined"?ao.direction:"bottom";an.addClass(ap);if(ao.hideArrow){an.find(".arrow").hide()}});var q=function(ao,an){an=an||"i";return"<"+an+' class="'+ao+'"/>'};var S={editor:b,toolbar:v,editingArea:e,codable:u,editable:U,statusbar:l,airEditor:r,airEditable:a,buttonGroup:ab,button:w,dropdown:ak,dropdownCheck:ac,palette:ah,dialog:af,popover:O,icon:q,toggleBtn:function(ao,an){ao.toggleClass("disabled",!an);ao.attr("disabled",!an)},toggleBtnActive:function(ao,an){ao.toggleClass("active",an)},onDialogShown:function(ao,an){ao.one("shown.bs.modal",an)},onDialogHidden:function(ao,an){ao.one("hidden.bs.modal",an)},showDialog:function(an){an.modal("show")},hideDialog:function(an){an.modal("hide")},createLayout:function(an,ao){var ap=(ao.airMode?S.airEditor([S.editingArea([S.airEditable()])]):S.editor([S.toolbar(),S.editingArea([S.codable(),S.editable()]),S.statusbar()])).render();ap.insertAfter(an);return{note:an,editor:ap,toolbar:ap.find(".note-toolbar"),editingArea:ap.find(".note-editing-area"),editable:ap.find(".note-editable"),codable:ap.find(".note-codable"),statusbar:ap.find(".note-statusbar")}},removeLayout:function(an,ao){an.html(ao.editable.html());ao.editor.remove();an.show()}};M.summernote=M.summernote||{lang:{}};M.extend(M.summernote.lang,{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript",size:"Font Size"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},video:{video:"Video",videoLink:"Video Link",insert:"Insert Video",url:"Video URL?",providers:"(YouTube, Vimeo, Vine, Instagram, DailyMotion or Youku)"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},help:{insertParagraph:"Insert Paragraph",undo:"Undoes the last command",redo:"Redoes the last command",tab:"Tab",untab:"Untab",bold:"Set a bold style",italic:"Set a italic style",underline:"Set a underline style",strikethrough:"Set a strikethrough style",removeFormat:"Clean a style",justifyLeft:"Set left align",justifyCenter:"Set center align",justifyRight:"Set right align",justifyFull:"Set full align",insertUnorderedList:"Toggle unordered list",insertOrderedList:"Toggle ordered list",outdent:"Outdent on current paragraph",indent:"Indent on current paragraph",formatPara:"Change current block's format as a paragraph(P tag)",formatH1:"Change current block's format as H1",formatH2:"Change current block's format as H2",formatH3:"Change current block's format as H3",formatH4:"Change current block's format as H4",formatH5:"Change current block's format as H5",formatH6:"Change current block's format as H6",insertHorizontalRule:"Insert horizontal rule","linkDialog.show":"Show Link Dialog"},history:{undo:"Undo",redo:"Redo"},specialChar:{specialChar:"SPECIAL CHARACTERS",select:"Select Special characters"}}});var x=(function(){var an={BACKSPACE:8,TAB:9,ENTER:13,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,NUM0:48,NUM1:49,NUM2:50,NUM3:51,NUM4:52,NUM5:53,NUM6:54,NUM7:55,NUM8:56,B:66,E:69,I:73,J:74,K:75,L:76,R:82,S:83,U:85,V:86,Y:89,Z:90,SLASH:191,LEFTBRACKET:219,BACKSLASH:220,RIGHTBRACKET:221};return{isEdit:function(ao){return z.contains([an.BACKSPACE,an.TAB,an.ENTER,an.SPACE],ao)},isMove:function(ao){return z.contains([an.LEFT,an.UP,an.RIGHT,an.DOWN],ao)},nameFromCode:y.invertObject(an),code:an}})();var n=(function(){var ap=function(aB,aq){var au=aB.parentElement(),aw;var aA=document.body.createTextRange(),ay;var az=z.from(au.childNodes);for(aw=0;aw<az.length;aw++){if(d.isText(az[aw])){continue}aA.moveToElementText(az[aw]);if(aA.compareEndPoints("StartToStart",aB)>=0){break}ay=az[aw]}if(aw!==0&&d.isText(az[aw-1])){var aC=document.body.createTextRange(),ax=null;aC.moveToElementText(ay||au);aC.collapse(!ay);ax=ay?ay.nextSibling:au.firstChild;var at=aB.duplicate();at.setEndPoint("StartToStart",aC);var ar=at.text.replace(/[\r\n]/g,"").length;while(ar>ax.nodeValue.length&&ax.nextSibling){ar-=ax.nodeValue.length;ax=ax.nextSibling}var av=ax.nodeValue;if(aq&&ax.nextSibling&&d.isText(ax.nextSibling)&&ar===ax.nodeValue.length){ar-=ax.nodeValue.length;ax=ax.nextSibling}au=ax;aw=ar}return{cont:au,offset:aw}};var an=function(aq){var au=function(ax,aA){var az,aw;if(d.isText(ax)){var av=d.listPrev(ax,y.not(d.isText));var ay=z.last(av).previousSibling;az=ay||ax.parentNode;aA+=z.sum(z.tail(av),d.nodeLength);aw=!ay}else{az=ax.childNodes[aA]||ax;if(d.isText(az)){return au(az,0)}aA=0;aw=false}return{node:az,collapseToStart:aw,offset:aA}};var ar=document.body.createTextRange();var at=au(aq.node,aq.offset);ar.moveToElementText(at.node);ar.collapse(at.collapseToStart);ar.moveStart("character",at.offset);return ar};var ao=function(aw,av,ar,aq){this.sc=aw;this.so=av;this.ec=ar;this.eo=aq;var au=function(){if(aj.isW3CRangeSupport){var ax=document.createRange();ax.setStart(aw,av);ax.setEnd(ar,aq);return ax}else{var ay=an({node:aw,offset:av});ay.setEndPoint("EndToEnd",an({node:ar,offset:aq}));return ay}};this.getPoints=function(){return{sc:aw,so:av,ec:ar,eo:aq}};this.getStartPoint=function(){return{node:aw,offset:av}};this.getEndPoint=function(){return{node:ar,offset:aq}};this.select=function(){var ay=au();if(aj.isW3CRangeSupport){var ax=document.getSelection();if(ax.rangeCount>0){ax.removeAllRanges()}ax.addRange(ay)}else{ay.select()}return this};this.scrollIntoView=function(ay){var ax=M(ay).height();if(ay.scrollTop+ax<this.sc.offsetTop){ay.scrollTop+=Math.abs(ay.scrollTop+ax-this.sc.offsetTop)}return this};this.normalize=function(){var az=function(aA,aB){if((d.isVisiblePoint(aA)&&!d.isEdgePoint(aA))||(d.isVisiblePoint(aA)&&d.isRightEdgePoint(aA)&&!aB)||(d.isVisiblePoint(aA)&&d.isLeftEdgePoint(aA)&&aB)||(d.isVisiblePoint(aA)&&d.isBlock(aA.node)&&d.isEmpty(aA.node))){return aA}var aD=d.ancestor(aA.node,d.isBlock);if(((d.isLeftEdgePointOf(aA,aD)||d.isVoid(d.prevPoint(aA).node))&&!aB)||((d.isRightEdgePointOf(aA,aD)||d.isVoid(d.nextPoint(aA).node))&&aB)){if(d.isVisiblePoint(aA)){return aA}aB=!aB}var aC=aB?d.nextPointUntil(d.nextPoint(aA),d.isVisiblePoint):d.prevPointUntil(d.prevPoint(aA),d.isVisiblePoint);return aC||aA};var ax=az(this.getEndPoint(),false);var ay=this.isCollapsed()?ax:az(this.getStartPoint(),true);return new ao(ay.node,ay.offset,ax.node,ax.offset)};this.nodes=function(az,aA){az=az||y.ok;var ax=aA&&aA.includeAncestor;var aE=aA&&aA.fullyContains;var aC=this.getStartPoint();var aB=this.getEndPoint();var ay=[];var aD=[];d.walkPoint(aC,aB,function(aF){if(d.isEditable(aF.node)){return}var aG;if(aE){if(d.isLeftEdgePoint(aF)){aD.push(aF.node)}if(d.isRightEdgePoint(aF)&&z.contains(aD,aF.node)){aG=aF.node}}else{if(ax){aG=d.ancestor(aF.node,az)}else{aG=aF.node}}if(aG&&az(aG)){ay.push(aG)}},true);return z.unique(ay)};this.commonAncestor=function(){return d.commonAncestor(aw,ar)};this.expand=function(ax){var az=d.ancestor(aw,ax);var aA=d.ancestor(ar,ax);if(!az&&!aA){return new ao(aw,av,ar,aq)}var ay=this.getPoints();if(az){ay.sc=az;ay.so=0}if(aA){ay.ec=aA;ay.eo=d.nodeLength(aA)}return new ao(ay.sc,ay.so,ay.ec,ay.eo)};this.collapse=function(ax){if(ax){return new ao(aw,av,aw,av)}else{return new ao(ar,aq,ar,aq)}};this.splitText=function(){var ax=aw===ar;var ay=this.getPoints();if(d.isText(ar)&&!d.isEdgePoint(this.getEndPoint())){ar.splitText(aq)}if(d.isText(aw)&&!d.isEdgePoint(this.getStartPoint())){ay.sc=aw.splitText(av);ay.so=0;if(ax){ay.ec=ay.sc;ay.eo=aq-av}}return new ao(ay.sc,ay.so,ay.ec,ay.eo)};this.deleteContents=function(){if(this.isCollapsed()){return this}var ay=this.splitText();var az=ay.nodes(null,{fullyContains:true});var ax=d.prevPointUntil(ay.getStartPoint(),function(aB){return !z.contains(az,aB.node)});var aA=[];M.each(az,function(aB,aD){var aC=aD.parentNode;if(ax.node!==aC&&d.nodeLength(aC)===1){aA.push(aC)}d.remove(aD,false)});M.each(aA,function(aB,aC){d.remove(aC,false)});return new ao(ax.node,ax.offset,ax.node,ax.offset).normalize()};var at=function(ax){return function(){var ay=d.ancestor(aw,ax);return !!ay&&(ay===d.ancestor(ar,ax))}};this.isOnEditable=at(d.isEditable);this.isOnList=at(d.isList);this.isOnAnchor=at(d.isAnchor);this.isOnCell=at(d.isCell);this.isLeftEdgeOf=function(ax){if(!d.isLeftEdgePoint(this.getStartPoint())){return false}var ay=d.ancestor(this.sc,ax);return ay&&d.isLeftEdgeOf(this.sc,ay)};this.isCollapsed=function(){return aw===ar&&av===aq};this.wrapBodyInlineWithPara=function(){if(d.isBodyContainer(aw)&&d.isEmpty(aw)){aw.innerHTML=d.emptyPara;return new ao(aw.firstChild,0,aw.firstChild,0)}var ay=this.normalize();if(d.isParaInline(aw)||d.isPara(aw)){return ay}var aB;if(d.isInline(ay.sc)){var az=d.listAncestor(ay.sc,y.not(d.isInline));aB=z.last(az);if(!d.isInline(aB)){aB=az[az.length-2]||ay.sc.childNodes[ay.so]}}else{aB=ay.sc.childNodes[ay.so>0?ay.so-1:0]}var aA=d.listPrev(aB,d.isParaInline).reverse();aA=aA.concat(d.listNext(aB.nextSibling,d.isParaInline));if(aA.length){var ax=d.wrap(z.head(aA),"p");d.appendChildNodes(ax,z.tail(aA))}return this.normalize()};this.insertNode=function(ay){var ax=this.wrapBodyInlineWithPara().deleteContents();var az=d.splitPoint(ax.getStartPoint(),d.isInline(ay));if(az.rightNode){az.rightNode.parentNode.insertBefore(ay,az.rightNode)}else{az.container.appendChild(ay)}return ay};this.pasteHTML=function(az){var ay=M("<div></div>").html(az)[0];var aA=z.from(ay.childNodes);var ax=this.wrapBodyInlineWithPara().deleteContents();return aA.reverse().map(function(aB){return ax.insertNode(aB)}).reverse()};this.toString=function(){var ax=au();return aj.isW3CRangeSupport?ax.toString():ax.text};this.getWordRange=function(az){var ax=this.getEndPoint();if(!d.isCharPoint(ax)){return this}var ay=d.prevPointUntil(ax,function(aA){return !d.isCharPoint(aA)});if(az){ax=d.nextPointUntil(ax,function(aA){return !d.isCharPoint(aA)})}return new ao(ay.node,ay.offset,ax.node,ax.offset)};this.bookmark=function(ax){return{s:{path:d.makeOffsetPath(ax,aw),offset:av},e:{path:d.makeOffsetPath(ax,ar),offset:aq}}};this.paraBookmark=function(ax){return{s:{path:z.tail(d.makeOffsetPath(z.head(ax),aw)),offset:av},e:{path:z.tail(d.makeOffsetPath(z.last(ax),ar)),offset:aq}}};this.getClientRects=function(){var ax=au();return ax.getClientRects()}};return{create:function(av,au,at,ar){if(arguments.length===4){return new ao(av,au,at,ar)}else{if(arguments.length===2){at=av;ar=au;return new ao(av,au,at,ar)}else{var aq=this.createFromSelection();if(!aq&&arguments.length===1){aq=this.createFromNode(arguments[0]);return aq.collapse(d.emptyPara===arguments[0].innerHTML)}return aq}}},createFromSelection:function(){var aw,at,av,aq;if(aj.isW3CRangeSupport){var az=document.getSelection();if(!az||az.rangeCount===0){return null}else{if(d.isBody(az.anchorNode)){return null}}var ay=az.getRangeAt(0);aw=ay.startContainer;at=ay.startOffset;av=ay.endContainer;aq=ay.endOffset}else{var aB=document.selection.createRange();var au=aB.duplicate();au.collapse(false);var aA=aB;aA.collapse(true);var ar=ap(aA,true),ax=ap(au,false);if(d.isText(ar.node)&&d.isLeftEdgePoint(ar)&&d.isTextNode(ax.node)&&d.isRightEdgePoint(ax)&&ax.node.nextSibling===ar.node){ar=ax}aw=ar.cont;at=ar.offset;av=ax.cont;aq=ax.offset}return new ao(aw,at,av,aq)},createFromNode:function(at){var av=at;var au=0;var ar=at;var aq=d.nodeLength(ar);if(d.isVoid(av)){au=d.listPrev(av).length-1;av=av.parentNode}if(d.isBR(ar)){aq=d.listPrev(ar).length-1;ar=ar.parentNode}else{if(d.isVoid(ar)){aq=d.listPrev(ar).length;ar=ar.parentNode}}return this.create(av,au,ar,aq)},createFromNodeBefore:function(aq){return this.createFromNode(aq).collapse(true)},createFromNodeAfter:function(aq){return this.createFromNode(aq).collapse()},createFromBookmark:function(at,au){var aw=d.fromOffsetPath(at,au.s.path);var av=au.s.offset;var ar=d.fromOffsetPath(at,au.e.path);var aq=au.e.offset;return new ao(aw,av,ar,aq)},createFromParaBookmark:function(au,at){var av=au.s.offset;var aq=au.e.offset;var aw=d.fromOffsetPath(z.head(at),au.s.path);var ar=d.fromOffsetPath(z.last(at),au.e.path);return new ao(aw,av,ar,aq)}}})();var R=(function(){var an=function(ap){return M.Deferred(function(aq){M.extend(new FileReader(),{onload:function(ar){var at=ar.target.result;aq.resolve(at)},onerror:function(){aq.reject(this)}}).readAsDataURL(ap)}).promise()};var ao=function(ap){return M.Deferred(function(aq){var ar=M("<img>");ar.one("load",function(){ar.off("error abort");aq.resolve(ar)}).one("error abort",function(){ar.off("load").detach();aq.reject(ar)}).css({display:"none"}).appendTo(document.body).attr("src",ap)}).promise()};return{readFileAsDataURL:an,createImage:ao}})();var m=function(aq){var ao=[],ap=-1;var ar=aq[0];var an=function(){var au=n.create(ar);var av={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:aq.html(),bookmark:(au?au.bookmark(ar):av)}};var at=function(au){if(au.contents!==null){aq.html(au.contents)}if(au.bookmark!==null){n.createFromBookmark(ar,au.bookmark).select()}};this.rewind=function(){if(aq.html()!==ao[ap].contents){this.recordUndo()}ap=0;at(ao[ap])};this.reset=function(){ao=[];ap=-1;aq.html("");this.recordUndo()};this.undo=function(){if(aq.html()!==ao[ap].contents){this.recordUndo()}if(0<ap){ap--;at(ao[ap])}};this.redo=function(){if(ao.length-1>ap){ap++;at(ao[ap])}};this.recordUndo=function(){ap++;if(ao.length>ap){ao=ao.slice(0,ap)}ao.push(an())}};var K=function(){var an=function(aq,ap){if(aj.jqueryVersion<1.9){var ao={};M.each(ap,function(ar,at){ao[at]=aq.css(at)});return ao}return aq.css.call(aq,ap)};this.fromNode=function(ao){var ap=["font-family","font-size","text-align","list-style-type","line-height"];var aq=an(ao,ap)||{};aq["font-size"]=parseInt(aq["font-size"],10);return aq};this.stylePara=function(ao,ap){M.each(ao.nodes(d.isPara,{includeAncestor:true}),function(ar,aq){M(aq).css(ap)})};this.styleNodes=function(ao,at){ao=ao.splitText();var aw=at&&at.nodeName||"SPAN";var au=!!(at&&at.expandClosestSibling);var ar=!!(at&&at.onlyPartialContains);if(ao.isCollapsed()){return[ao.insertNode(d.create(aw))]}var aq=d.makePredByNodeName(aw);var ap=ao.nodes(d.isText,{fullyContains:true}).map(function(ax){return d.singleChildAncestor(ax,aq)||d.wrap(ax,aw)});if(au){if(ar){var av=ao.nodes();aq=y.and(aq,function(ax){return z.contains(av,ax)})}return ap.map(function(ay){var aA=d.withClosestSiblings(ay,aq);var ax=z.head(aA);var az=z.tail(aA);M.each(az,function(aB,aC){d.appendChildNodes(ax,aC.childNodes);d.remove(aC)});return z.head(aA)})}else{return ap}};this.current=function(ap){var au=M(!d.isElement(ap.sc)?ap.sc.parentNode:ap.sc);var aw=this.fromNode(au);try{aw=M.extend(aw,{"font-bold":document.queryCommandState("bold")?"bold":"normal","font-italic":document.queryCommandState("italic")?"italic":"normal","font-underline":document.queryCommandState("underline")?"underline":"normal","font-subscript":document.queryCommandState("subscript")?"subscript":"normal","font-superscript":document.queryCommandState("superscript")?"superscript":"normal","font-strikethrough":document.queryCommandState("strikethrough")?"strikethrough":"normal"})}catch(av){}if(!ap.isOnList()){aw["list-style"]="none"}else{var aq=["circle","disc","disc-leading-zero","square"];var ar=M.inArray(aw["list-style-type"],aq)>-1;aw["list-style"]=ar?"unordered":"ordered"}var ao=d.ancestor(ap.sc,d.isPara);if(ao&&ao.style["line-height"]){aw["line-height"]=ao.style.lineHeight}else{var at=parseInt(aw["line-height"],10)/parseInt(aw["font-size"],10);aw["line-height"]=at.toFixed(1)}aw.anchor=ap.isOnAnchor()&&d.ancestor(ap.sc,d.isAnchor);aw.ancestors=d.listAncestor(ap.sc,d.isEditable);aw.range=ap;return aw}};var P=function(){var an=this;this.insertOrderedList=function(ao){this.toggleList("OL",ao)};this.insertUnorderedList=function(ao){this.toggleList("UL",ao)};this.indent=function(ar){var ap=this;var ao=n.create(ar).wrapBodyInlineWithPara();var aq=ao.nodes(d.isPara,{includeAncestor:true});var at=z.clusterBy(aq,y.peq2("parentNode"));M.each(at,function(au,av){var aw=z.head(av);if(d.isLi(aw)){ap.wrapList(av,aw.parentNode.nodeName)}else{M.each(av,function(ay,ax){M(ax).css("marginLeft",function(az,aA){return(parseInt(aA,10)||0)+25})})}});ao.select()};this.outdent=function(ar){var ap=this;var ao=n.create(ar).wrapBodyInlineWithPara();var aq=ao.nodes(d.isPara,{includeAncestor:true});var at=z.clusterBy(aq,y.peq2("parentNode"));M.each(at,function(au,av){var aw=z.head(av);if(d.isLi(aw)){ap.releaseList([av])}else{M.each(av,function(ay,ax){M(ax).css("marginLeft",function(az,aA){aA=(parseInt(aA,10)||0);return aA>25?aA-25:""})})}});ao.select()};this.toggleList=function(ar,at){var ao=n.create(at).wrapBodyInlineWithPara();var aq=ao.nodes(d.isPara,{includeAncestor:true});var au=ao.paraBookmark(aq);var aw=z.clusterBy(aq,y.peq2("parentNode"));if(z.find(aq,d.isPurePara)){var ap=[];M.each(aw,function(ax,ay){ap=ap.concat(an.wrapList(ay,ar))});aq=ap}else{var av=ao.nodes(d.isList,{includeAncestor:true}).filter(function(ax){return !M.nodeName(ax,ar)});if(av.length){M.each(av,function(ax,ay){d.replace(ay,ar)})}else{aq=this.releaseList(aw,true)}}n.createFromParaBookmark(au,aq).select()};this.wrapList=function(ar,aq){var at=z.head(ar);var av=z.last(ar);var ap=d.isList(at.previousSibling)&&at.previousSibling;var ao=d.isList(av.nextSibling)&&av.nextSibling;var au=ap||d.insertAfter(d.create(aq||"UL"),av);ar=ar.map(function(aw){return d.isPurePara(aw)?d.replace(aw,"LI"):aw});d.appendChildNodes(au,ar);if(ao){d.appendChildNodes(au,z.from(ao.childNodes));d.remove(ao)}return ar};this.releaseList=function(aq,ao){var ap=[];M.each(aq,function(ar,at){var au=z.head(at);var av=z.last(at);var ay=ao?d.lastAncestor(au,d.isList):au.parentNode;var ax=ay.childNodes.length>1?d.splitTree(ay,{node:av.parentNode,offset:d.position(av)+1},{isSkipPaddingBlankHTML:true}):null;var aw=d.splitTree(ay,{node:au.parentNode,offset:d.position(au)},{isSkipPaddingBlankHTML:true});at=ao?d.listDescendant(aw,d.isLi):z.from(aw.childNodes).filter(d.isLi);if(ao||!d.isList(ay.parentNode)){at=at.map(function(aA){return d.replace(aA,"P")})}M.each(z.from(at).reverse(),function(aB,aA){d.insertAfter(aA,ay)});var az=z.compact([ay,aw,ax]);M.each(az,function(aA,aB){var aC=[aB].concat(d.listDescendant(aB,d.isList));M.each(aC.reverse(),function(aD,aE){if(!d.nodeLength(aE)){d.remove(aE,true)}})});ap=ap.concat(at)});return ap}};var g=function(){var an=new P();this.insertTab=function(ap,ao){var aq=d.createText(new Array(ao+1).join(d.NBSP_CHAR));ap=ap.deleteContents();ap.insertNode(aq,true);ap=n.create(aq,ao);ap.select()};this.insertParagraph=function(aq){var ap=n.create(aq);ap=ap.deleteContents();ap=ap.wrapBodyInlineWithPara();var au=d.ancestor(ap.sc,d.isPara);var at;if(au){if(d.isEmpty(au)&&d.isLi(au)){an.toggleList(au.parentNode.nodeName);return}else{if(d.isEmpty(au)&&d.isPara(au)&&d.isBlockquote(au.parentNode)){d.insertAfter(au,au.parentNode);at=au}else{at=d.splitTree(au,ap.getStartPoint());var ao=d.listDescendant(au,d.isEmptyAnchor);ao=ao.concat(d.listDescendant(at,d.isEmptyAnchor));M.each(ao,function(av,aw){d.remove(aw)});if((d.isHeading(at)||d.isPre(at))&&d.isEmpty(at)){at=d.replace(at,"p")}}}}else{var ar=ap.sc.childNodes[ap.so];at=M(d.emptyPara)[0];if(ar){ap.sc.insertBefore(at,ar)}else{ap.sc.appendChild(at)}}n.create(at,0).normalize().select().scrollIntoView(aq)}};var k=function(){this.tab=function(ao,aq){var an=d.ancestor(ao.commonAncestor(),d.isCell);var at=d.ancestor(an,d.isTable);var ap=d.listDescendant(at,d.isCell);var ar=z[aq?"prev":"next"](ap,an);if(ar){n.create(ar,0).select()}};this.createTable=function(av,au,ax){var aq=[],ap;for(var ar=0;ar<av;ar++){aq.push("<td>"+d.blank+"</td>")}ap=aq.join("");var at=[],an;for(var ao=0;ao<au;ao++){at.push("<tr>"+ap+"</tr>")}an=at.join("");var aw=M("<table>"+an+"</table>");if(ax&&ax.tableClassName){aw.addClass(ax.tableClassName)}return aw[0]}};var h="bogus";var D=function(ao){var ay=this;var at=ao.layoutInfo.note;var au=ao.layoutInfo.editor;var aF=ao.layoutInfo.editable;var ap=ao.options;var aG=ap.langInfo;var az=aF[0];var an=null;var aB=new K();var aC=new k();var aE=new g();var aD=new P();var av=new m(aF);this.initialize=function(){aF.on("keydown",function(aI){if(aI.keyCode===x.code.ENTER){ao.triggerEvent("enter",aI)}ao.triggerEvent("keydown",aI);if(ap.shortcuts&&!aI.isDefaultPrevented()){ay.handleKeyMap(aI)}}).on("keyup",function(aI){ao.triggerEvent("keyup",aI)}).on("focus",function(aI){ao.triggerEvent("focus",aI)}).on("blur",function(aI){ao.triggerEvent("blur",aI)}).on("mousedown",function(aI){ao.triggerEvent("mousedown",aI)}).on("mouseup",function(aI){ao.triggerEvent("mouseup",aI)}).on("scroll",function(aI){ao.triggerEvent("scroll",aI)}).on("paste",function(aI){ao.triggerEvent("paste",aI)});aF.html(d.html(at)||d.emptyPara);var aH=aj.isMSIE?"DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted":"input";aF.on(aH,function(){ao.triggerEvent("change",aF.html())});au.on("focusin",function(aI){ao.triggerEvent("focusin",aI)}).on("focusout",function(aI){ao.triggerEvent("focusout",aI)});if(!ap.airMode&&ap.height){aF.outerHeight(ap.height)}if(!ap.airMode&&ap.maxHeight){aF.css("max-height",ap.maxHeight)}if(!ap.airMode&&ap.minHeight){aF.css("min-height",ap.minHeight)}av.recordUndo()};this.destroy=function(){aF.off()};this.handleKeyMap=function(aK){var aL=ap.keyMap[aj.isMac?"mac":"pc"];var aJ=[];if(aK.metaKey){aJ.push("CMD")}if(aK.ctrlKey&&!aK.altKey){aJ.push("CTRL")}if(aK.shiftKey){aJ.push("SHIFT")}var aI=x.nameFromCode[aK.keyCode];if(aI){aJ.push(aI)}var aH=aL[aJ.join("+")];if(aH){aK.preventDefault();ao.invoke(aH)}else{if(x.isEdit(aK.keyCode)){this.afterCommand()}}};this.createRange=function(){this.focus();return n.create(az)};this.saveRange=function(aH){an=this.createRange();if(aH){an.collapse().select()}};this.restoreRange=function(){if(an){an.select();this.focus()}};this.saveTarget=function(aH){aF.data("target",aH)};this.clearTarget=function(){aF.removeData("target")};this.restoreTarget=function(){return aF.data("target")};this.currentStyle=function(){var aH=n.create();if(aH){aH=aH.normalize()}return aH?aB.current(aH):aB.fromNode(aF)};this.styleFromNode=function(aH){return aB.fromNode(aH)};this.undo=function(){ao.triggerEvent("before.command",aF.html());av.undo();ao.triggerEvent("change",aF.html())};ao.memo("help.undo",aG.help.undo);this.redo=function(){ao.triggerEvent("before.command",aF.html());av.redo();ao.triggerEvent("change",aF.html())};ao.memo("help.redo",aG.help.redo);var ar=this.beforeCommand=function(){ao.triggerEvent("before.command",aF.html());ay.focus()};var ax=this.afterCommand=function(aH){av.recordUndo();if(!aH){ao.triggerEvent("change",aF.html())}};var aq=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","fontName"];for(var aw=0,aA=aq.length;aw<aA;aw++){this[aq[aw]]=(function(aH){return function(aI){ar();document.execCommand(aH,false,aI);ax(true)}})(aq[aw]);ao.memo("help."+aq[aw],aG.help[aq[aw]])}this.tab=function(){var aH=this.createRange();if(aH.isCollapsed()&&aH.isOnCell()){aC.tab(aH)}else{ar();aE.insertTab(aH,ap.tabSize);ax()}};ao.memo("help.tab",aG.help.tab);this.untab=function(){var aH=this.createRange();if(aH.isCollapsed()&&aH.isOnCell()){aC.tab(aH,true)}};ao.memo("help.untab",aG.help.untab);this.wrapCommand=function(aH){return function(){ar();aH.apply(ay,arguments);ax()}};this.insertParagraph=this.wrapCommand(function(){aE.insertParagraph(az)});ao.memo("help.insertParagraph",aG.help.insertParagraph);this.insertOrderedList=this.wrapCommand(function(){aD.insertOrderedList(az)});ao.memo("help.insertOrderedList",aG.help.insertOrderedList);this.insertUnorderedList=this.wrapCommand(function(){aD.insertUnorderedList(az)});ao.memo("help.insertUnorderedList",aG.help.insertUnorderedList);this.indent=this.wrapCommand(function(){aD.indent(az)});ao.memo("help.indent",aG.help.indent);this.outdent=this.wrapCommand(function(){aD.outdent(az)});ao.memo("help.outdent",aG.help.outdent);this.insertImage=function(aI,aH){return R.createImage(aI,aH).then(function(aJ){ar();if(typeof aH==="function"){aH(aJ)}else{if(typeof aH==="string"){aJ.attr("data-filename",aH)}aJ.css("width",Math.min(aF.width(),aJ.width()))}aJ.show();n.create(az).insertNode(aJ[0]);n.createFromNodeAfter(aJ[0]).select();ax()}).fail(function(aJ){ao.triggerEvent("image.upload.error",aJ)})};this.insertImages=function(aH){M.each(aH,function(aI,aK){var aJ=aK.name;if(ap.maximumImageFileSize&&ap.maximumImageFileSize<aK.size){ao.triggerEvent("image.upload.error",aG.image.maximumFileSizeError)}else{R.readFileAsDataURL(aK).then(function(aL){return ay.insertImage(aL,aJ)}).fail(function(){ao.triggerEvent("image.upload.error")})}})};this.insertImagesOrCallback=function(aI){var aH=ap.callbacks;if(aH.onImageUpload){ao.triggerEvent("image.upload",aI)}else{this.insertImages(aI)}};this.insertNode=this.wrapCommand(function(aI){var aH=this.createRange();aH.insertNode(aI);n.createFromNodeAfter(aI).select()});this.insertText=this.wrapCommand(function(aJ){var aH=this.createRange();var aI=aH.insertNode(d.createText(aJ));n.create(aI,d.nodeLength(aI)).select()});this.getSelectedText=function(){var aH=this.createRange();if(aH.isOnAnchor()){aH=n.createFromNode(d.ancestor(aH.sc,d.isAnchor))}return aH.toString()};this.pasteHTML=this.wrapCommand(function(aH){var aI=this.createRange().pasteHTML(aH);n.createFromNodeAfter(z.last(aI)).select()});this.formatBlock=this.wrapCommand(function(aH){aH=aj.isMSIE?"<"+aH+">":aH;document.execCommand("FormatBlock",false,aH)});this.formatPara=function(){this.formatBlock("P")};ao.memo("help.formatPara",aG.help.formatPara);for(var aw=1;aw<=6;aw++){this["formatH"+aw]=function(aH){return function(){this.formatBlock("H"+aH)}}(aw);ao.memo("help.formatH"+aw,aG.help["formatH"+aw])}this.fontSize=function(aK){var aH=this.createRange();if(aH&&aH.isCollapsed()){var aI=aB.styleNodes(aH);var aJ=z.head(aI);M(aI).css({"font-size":aK+"px"});if(aJ&&!d.nodeLength(aJ)){aJ.innerHTML=d.ZERO_WIDTH_NBSP_CHAR;n.createFromNodeAfter(aJ.firstChild).select();aF.data(h,aJ)}}else{ar();M(aB.styleNodes(aH)).css({"font-size":aK+"px"});ax()}};this.insertHorizontalRule=this.wrapCommand(function(){var aH=this.createRange().insertNode(d.create("HR"));if(aH.nextSibling){n.create(aH.nextSibling,0).normalize().select()}});ao.memo("help.insertHorizontalRule",aG.help.insertHorizontalRule);this.removeBogus=function(){var aI=aF.data(h);if(!aI){return}var aJ=z.find(z.from(aI.childNodes),d.isText);var aH=aJ.nodeValue.indexOf(d.ZERO_WIDTH_NBSP_CHAR);if(aH!==-1){aJ.deleteData(aH,1)}if(d.isEmpty(aI)){d.remove(aI)}aF.removeData(h)};this.lineHeight=this.wrapCommand(function(aH){aB.stylePara(this.createRange(),{lineHeight:aH})});this.unlink=function(){var aH=this.createRange();if(aH.isOnAnchor()){var aI=d.ancestor(aH.sc,d.isAnchor);aH=n.createFromNode(aI);aH.select();ar();document.execCommand("unlink");ax()}};this.createLink=this.wrapCommand(function(aN){var aO=aN.url;var aK=aN.text;var aR=aN.isNewWindow;var aH=aN.range||this.createRange();var aS=aH.toString()!==aK;if(ap.onCreateLink){aO=ap.onCreateLink(aO)}var aI=[];if(aS){var aM=aH.insertNode(M("<A>"+aK+"</A>")[0]);aI.push(aM)}else{aI=aB.styleNodes(aH,{nodeName:"A",expandClosestSibling:true,onlyPartialContains:true})}M.each(aI,function(aT,aU){M(aU).attr("href",aO);if(aR){M(aU).attr("target","_blank")}else{M(aU).removeAttr("target")}});var aQ=n.createFromNodeBefore(z.head(aI));var aJ=aQ.getStartPoint();var aL=n.createFromNodeAfter(z.last(aI));var aP=aL.getEndPoint();n.create(aJ.node,aJ.offset,aP.node,aP.offset).select()});this.getLinkInfo=function(){var aH=this.createRange().expand(d.isAnchor);var aI=M(z.head(aH.nodes(d.isAnchor)));return{range:aH,text:aH.toString(),isNewWindow:aI.length?aI.attr("target")==="_blank":false,url:aI.length?aI.attr("href"):""}};this.color=this.wrapCommand(function(aI){var aJ=aI.foreColor;var aH=aI.backColor;if(aJ){document.execCommand("foreColor",false,aJ)}if(aH){document.execCommand("backColor",false,aH)}});this.insertTable=this.wrapCommand(function(aJ){var aI=aJ.split("x");var aH=this.createRange().deleteContents();aH.insertNode(aC.createTable(aI[0],aI[1],ap))});this.floatMe=this.wrapCommand(function(aI){var aH=M(this.restoreTarget());aH.css("float",aI)});this.resize=this.wrapCommand(function(aI){var aH=M(this.restoreTarget());aH.css({width:aI*100+"%",height:""})});this.resizeTo=function(aM,aH,aI){var aL;if(aI){var aK=aM.y/aM.x;var aJ=aH.data("ratio");aL={width:aJ>aK?aM.x:aM.y/aJ,height:aJ>aK?aM.x*aJ:aM.y}}else{aL={width:aM.x,height:aM.y}}aH.css(aL)};this.removeMedia=this.wrapCommand(function(){var aH=M(this.restoreTarget()).detach();ao.triggerEvent("media.delete",aH,aF)});this.hasFocus=function(){return aF.is(":focus")};this.focus=function(){if(!this.hasFocus()){aF.focus()}};this.isEmpty=function(){return d.isEmpty(aF[0])||d.emptyPara===aF.html()};this.empty=function(){ao.invoke("code",d.emptyPara)}};var t=function(ap){var ao=this;var an=ap.layoutInfo.editable;this.events={"summernote.keydown":function(aq,ar){if(ao.needKeydownHook()){if((ar.ctrlKey||ar.metaKey)&&ar.keyCode===x.code.V){ap.invoke("editor.saveRange");ao.$paste.focus();setTimeout(function(){ao.pasteByHook()},0)}}}};this.needKeydownHook=function(){return(aj.isMSIE&&aj.browserVersion>10)||aj.isFF};this.initialize=function(){if(this.needKeydownHook()){this.$paste=M("<div />").attr("contenteditable",true).css({position:"absolute",left:-100000,opacity:0});an.before(this.$paste);this.$paste.on("paste",function(aq){ap.triggerEvent("paste",aq)})}else{an.on("paste",this.pasteByEvent)}};this.destroy=function(){if(this.needKeydownHook()){this.$paste.remove();this.$paste=null}};this.pasteByHook=function(){var aw=this.$paste[0].firstChild;if(d.isImg(aw)){var aq=aw.src;var au=atob(aq.split(",")[1]);var ax=new Uint8Array(au.length);for(var at=0;at<au.length;at++){ax[at]=au.charCodeAt(at)}var ar=new Blob([ax],{type:"image/png"});ar.name="clipboard.png";ap.invoke("editor.restoreRange");ap.invoke("editor.focus");ap.invoke("editor.insertImagesOrCallback",[ar])}else{var av=M("<div />").html(this.$paste.html()).html();ap.invoke("editor.restoreRange");ap.invoke("editor.focus");if(av){ap.invoke("editor.pasteHTML",av)}}this.$paste.empty()};this.pasteByEvent=function(ar){var at=ar.originalEvent.clipboardData;if(at&&at.items&&at.items.length){var aq=z.head(at.items);if(aq.kind==="file"&&aq.type.indexOf("image/")!==-1){ap.invoke("editor.insertImagesOrCallback",[aq.getAsFile()])}ap.invoke("editor.afterCommand")}}};var F=function(ap){var at=M(document);var aq=ap.layoutInfo.editor;var an=ap.layoutInfo.editable;var ao=ap.options;var ar=ao.langInfo;var au=M(['<div class="note-dropzone">','  <div class="note-dropzone-message"/>',"</div>"].join("")).prependTo(aq);this.initialize=function(){if(ao.disableDragAndDrop){at.on("drop",function(av){av.preventDefault()})}else{this.attachDragAndDropEvent()}};this.attachDragAndDropEvent=function(){var aw=M(),av=au.find(".note-dropzone-message");at.on("dragenter",function(az){var ay=ap.invoke("codeview.isActivated");var ax=aq.width()>0&&aq.height()>0;if(!ay&&!aw.length&&ax){aq.addClass("dragover");au.width(aq.width());au.height(aq.height());av.text(ar.image.dragImageHere)}aw=aw.add(az.target)}).on("dragleave",function(ax){aw=aw.not(ax.target);if(!aw.length){aq.removeClass("dragover")}}).on("drop",function(){aw=M();aq.removeClass("dragover")});au.on("dragenter",function(){au.addClass("hover");av.text(ar.image.dropImage)}).on("dragleave",function(){au.removeClass("hover");av.text(ar.image.dragImageHere)});au.on("drop",function(ax){var ay=ax.originalEvent.dataTransfer;if(ay&&ay.files&&ay.files.length){ax.preventDefault();an.focus();ap.invoke("editor.insertImagesOrCallback",ay.files)}else{M.each(ay.types,function(az,aA){var aB=ay.getData(aA);if(aA.toLowerCase().indexOf("text")>-1){ap.invoke("editor.pasteHTML",aB)}else{M(aB).each(function(){ap.invoke("editor.insertNode",this)})}})}}).on("dragover",false)}};var C;if(aj.hasCodeMirror){if(aj.isSupportAmd){require(["codemirror"],function(an){C=an})}else{C=window.CodeMirror}}var J=function(aq){var ar=aq.layoutInfo.editor;var ao=aq.layoutInfo.editable;var an=aq.layoutInfo.codable;var ap=aq.options;this.sync=function(){var at=this.isActivated();if(at&&aj.hasCodeMirror){an.data("cmEditor").save()}};this.isActivated=function(){return ar.hasClass("codeview")};this.toggle=function(){if(this.isActivated()){this.deactivate()}else{this.activate()}aq.triggerEvent("codeview.toggled")};this.activate=function(){an.val(d.html(ao,ap.prettifyHtml));an.height(ao.height());aq.invoke("toolbar.updateCodeview",true);ar.addClass("codeview");an.focus();if(aj.hasCodeMirror){var au=C.fromTextArea(an[0],ap.codemirror);if(ap.codemirror.tern){var at=new C.TernServer(ap.codemirror.tern);au.ternServer=at;au.on("cursorActivity",function(av){at.updateArgHints(av)})}au.setSize(null,ao.outerHeight());an.data("cmEditor",au)}};this.deactivate=function(){if(aj.hasCodeMirror){var av=an.data("cmEditor");an.val(av.getValue());av.toTextArea()}var au=d.value(an,ap.prettifyHtml)||d.emptyPara;var at=ao.html()!==au;ao.html(au);ao.height(ap.height?an.height():"auto");ar.removeClass("codeview");if(at){aq.triggerEvent("change",ao.html(),ao)}ao.focus();aq.invoke("toolbar.updateCodeview",false)};this.destroy=function(){if(this.isActivated()){this.deactivate()}}};var ad=24;var I=function(aq){var ar=M(document);var an=aq.layoutInfo.statusbar;var ao=aq.layoutInfo.editable;var ap=aq.options;this.initialize=function(){if(ap.airMode||ap.disableResizeEditor){return}an.on("mousedown",function(au){au.preventDefault();au.stopPropagation();var at=ao.offset().top-ar.scrollTop();ar.on("mousemove",function(aw){var av=aw.clientY-(at+ad);av=(ap.minheight>0)?Math.max(av,ap.minheight):av;av=(ap.maxHeight>0)?Math.min(av,ap.maxHeight):av;ao.height(av)}).one("mouseup",function(){ar.off("mousemove")})})};this.destroy=function(){an.off()}};var s=function(aq){var at=aq.layoutInfo.editor;var ap=aq.layoutInfo.toolbar;var ao=aq.layoutInfo.editable;var an=aq.layoutInfo.codable;var au=M(window);var ar=M("html, body");this.toggle=function(){var av=function(aw){ao.css("height",aw.h);an.css("height",aw.h);if(an.data("cmeditor")){an.data("cmeditor").setsize(null,aw.h)}};at.toggleClass("fullscreen");if(this.isFullscreen()){ao.data("orgHeight",ao.css("height"));au.on("resize",function(){av({h:au.height()-ap.outerHeight()})}).trigger("resize");ar.css("overflow","hidden")}else{au.off("resize");av({h:ao.data("orgHeight")});ar.css("overflow","visible")}aq.invoke("toolbar.updateFullscreen",this.isFullscreen())};this.isFullscreen=function(){return at.hasClass("fullscreen")}};var ag=function(ap){var an=this;var ar=M(document);var aq=ap.layoutInfo.editingArea;var ao=ap.options;this.events={"summernote.mousedown":function(at,au){if(an.update(au.target)){au.preventDefault()}},"summernote.keyup summernote.scroll summernote.change summernote.dialog.shown":function(){an.update()}};this.initialize=function(){this.$handle=M(['<div class="note-handle">','<div class="note-control-selection">','<div class="note-control-selection-bg"></div>','<div class="note-control-holder note-control-nw"></div>','<div class="note-control-holder note-control-ne"></div>','<div class="note-control-holder note-control-sw"></div>','<div class="',(ao.disableResizeImage?"note-control-holder":"note-control-sizing"),' note-control-se"></div>',(ao.disableResizeImage?"":'<div class="note-control-selection-info"></div>'),"</div>","</div>"].join("")).prependTo(aq);this.$handle.on("mousedown",function(au){if(d.isControlSizing(au.target)){au.preventDefault();au.stopPropagation();var at=an.$handle.find(".note-control-selection").data("target"),aw=at.offset(),av=ar.scrollTop();ar.on("mousemove",function(ax){ap.invoke("editor.resizeTo",{x:ax.clientX-aw.left,y:ax.clientY-(aw.top-av)},at,!ax.shiftKey);an.update(at[0])}).one("mouseup",function(ax){ax.preventDefault();ar.off("mousemove");ap.invoke("editor.afterCommand")});if(!at.data("ratio")){at.data("ratio",at.height()/at.width())}}})};this.destroy=function(){this.$handle.remove()};this.update=function(aw){var az=d.isImg(aw);var at=this.$handle.find(".note-control-selection");ap.invoke("imagePopover.update",aw);if(az){var au=M(aw);var ay=au.position();var av={w:au.outerWidth(true),h:au.outerHeight(true)};at.css({display:"block",left:ay.left,top:ay.top,width:av.w,height:av.h}).data("target",au);var ax=av.w+"x"+av.h;at.find(".note-control-selection-info").text(ax);ap.invoke("editor.saveTarget",aw)}else{this.hide()}return az};this.hide=function(){ap.invoke("editor.clearTarget");this.$handle.children().hide()}};var ae=function(ap){var an=this;var aq="http://";var ao=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|mailto:[A-Z0-9._%+-]+@)?(www\.)?(.+)$/i;this.events={"summernote.keyup":function(ar,at){if(!at.isDefaultPrevented()){an.handleKeyup(at)}},"summernote.keydown":function(ar,at){an.handleKeydown(at)}};this.initialize=function(){this.lastWordRange=null};this.destroy=function(){this.lastWordRange=null};this.replace=function(){if(!this.lastWordRange){return}var ar=this.lastWordRange.toString();var at=ar.match(ao);if(at&&(at[1]||at[2])){var av=at[1]?ar:aq+ar;var au=M("<a />").html(ar).attr("href",av)[0];this.lastWordRange.insertNode(au);this.lastWordRange=null;ap.invoke("editor.focus")}};this.handleKeydown=function(ar){if(z.contains([x.code.ENTER,x.code.SPACE],ar.keyCode)){var at=ap.invoke("editor.createRange").getWordRange();this.lastWordRange=at}};this.handleKeyup=function(ar){if(z.contains([x.code.ENTER,x.code.SPACE],ar.keyCode)){this.replace()}}};var al=function(ao){var an=ao.layoutInfo.note;this.events={"summernote.change":function(){an.val(ao.invoke("code"))}};this.shouldInitialize=function(){return d.isTextarea(an[0])}};var L=function(ap){var an=this;var aq=ap.layoutInfo.editingArea;var ao=ap.options;this.events={"summernote.init summernote.change":function(){an.update()},"summernote.codeview.toggled":function(){an.update()}};this.shouldInitialize=function(){return !!ao.placeholder};this.initialize=function(){this.$placeholder=M('<div class="note-placeholder">');this.$placeholder.on("click",function(){ap.invoke("focus")}).text(ao.placeholder).prependTo(aq)};this.destroy=function(){this.$placeholder.remove()};this.update=function(){var ar=!ap.invoke("codeview.isActivated")&&ap.invoke("editor.isEmpty");this.$placeholder.toggle(ar)}};var B=function(aq){var an=this;var at=M.summernote.ui;var ap=aq.layoutInfo.toolbar;var ao=aq.options;var av=ao.langInfo;var au=y.invertObject(ao.keyMap[aj.isMac?"mac":"pc"]);var ar=this.representShortcut=function(ax){var aw=au[ax];if(aj.isMac){aw=aw.replace("CMD","").replace("SHIFT","")}aw=aw.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]");return" ("+aw+")"};this.initialize=function(){this.addToolbarButtons();this.addImagePopoverButtons();this.addLinkPopoverButtons()};this.addToolbarButtons=function(){aq.memo("button.style",function(){return at.buttonGroup([at.button({className:"dropdown-toggle",contents:at.icon(ao.icons.magic)+" "+at.icon(ao.icons.caret,"span"),tooltip:av.style.style,data:{toggle:"dropdown"}}),at.dropdown({className:"dropdown-style",items:aq.options.styleTags,template:function(aF){if(typeof aF==="string"){aF={tag:aF,title:aF}}var aC=aF.tag;var aG=aF.title;var aE=aF.style?' style="'+aF.style+'" ':"";var aD=aF.className?' className="'+aF.className+'"':"";return"<"+aC+aE+aD+">"+aG+"</"+aC+">"},click:aq.createInvokeHandler("editor.formatBlock")})]).render()});aq.memo("button.bold",function(){return at.button({className:"note-btn-bold",contents:at.icon(ao.icons.bold),tooltip:av.font.bold+ar("bold"),click:aq.createInvokeHandler("editor.bold")}).render()});aq.memo("button.italic",function(){return at.button({className:"note-btn-italic",contents:at.icon(ao.icons.italic),tooltip:av.font.italic+ar("italic"),click:aq.createInvokeHandler("editor.italic")}).render()});aq.memo("button.underline",function(){return at.button({className:"note-btn-underline",contents:at.icon(ao.icons.underline),tooltip:av.font.underline+ar("underline"),click:aq.createInvokeHandler("editor.underline")}).render()});aq.memo("button.clear",function(){return at.button({contents:at.icon(ao.icons.eraser),tooltip:av.font.clear+ar("removeFormat"),click:aq.createInvokeHandler("editor.removeFormat")}).render()});aq.memo("button.strikethrough",function(){return at.button({className:"note-btn-strikethrough",contents:at.icon(ao.icons.strikethrough),tooltip:av.font.strikethrough+ar("strikethrough"),click:aq.createInvokeHandler("editor.strikethrough")}).render()});aq.memo("button.superscript",function(){return at.button({className:"note-btn-superscript",contents:at.icon(ao.icons.superscript),tooltip:av.font.superscript,click:aq.createInvokeHandler("editor.superscript")}).render()});aq.memo("button.subscript",function(){return at.button({className:"note-btn-subscript",contents:at.icon(ao.icons.subscript),tooltip:av.font.subscript,click:aq.createInvokeHandler("editor.subscript")}).render()});aq.memo("button.fontname",function(){return at.buttonGroup([at.button({className:"dropdown-toggle",contents:'<span class="note-current-fontname"/> '+at.icon(ao.icons.caret,"span"),tooltip:av.font.name,data:{toggle:"dropdown"}}),at.dropdownCheck({className:"dropdown-fontname",checkClassName:ao.icons.menuCheck,items:ao.fontNames.filter(function(aC){return aj.isFontInstalled(aC)||z.contains(ao.fontNamesIgnoreCheck,aC)}),template:function(aC){return'<span style="font-family:'+aC+'">'+aC+"</span>"},click:aq.createInvokeHandler("editor.fontName")})]).render()});aq.memo("button.fontsize",function(){return at.buttonGroup([at.button({className:"dropdown-toggle",contents:'<span class="note-current-fontsize"/>'+at.icon(ao.icons.caret,"span"),tooltip:av.font.size,data:{toggle:"dropdown"}}),at.dropdownCheck({className:"dropdown-fontsize",checkClassName:ao.icons.menuCheck,items:ao.fontSizes,click:aq.createInvokeHandler("editor.fontSize")})]).render()});aq.memo("button.color",function(){return at.buttonGroup({className:"note-color",children:[at.button({className:"note-current-color-button",contents:at.icon(ao.icons.font+" note-recent-color"),tooltip:av.color.recent,click:function(aD){var aC=M(aD.currentTarget);aq.invoke("editor.color",{backColor:aC.attr("data-backColor"),foreColor:aC.attr("data-foreColor")})},callback:function(aD){var aC=aD.find(".note-recent-color");aC.css("background-color","#FFFF00");aD.attr("data-backColor","#FFFF00")}}),at.button({className:"dropdown-toggle",contents:at.icon(ao.icons.caret,"span"),tooltip:av.color.more,data:{toggle:"dropdown"}}),at.dropdown({items:["<li>",'<div class="btn-group">','  <div class="note-palette-title">'+av.color.background+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="backColor" data-value="inherit">',av.color.transparent,"    </button>","  </div>",'  <div class="note-holder" data-event="backColor"/>',"</div>",'<div class="btn-group">','  <div class="note-palette-title">'+av.color.foreground+"</div>","  <div>",'    <button type="button" class="note-color-reset btn btn-default" data-event="removeFormat" data-value="foreColor">',av.color.resetToDefault,"    </button>","  </div>",'  <div class="note-holder" data-event="foreColor"/>',"</div>","</li>"].join(""),callback:function(aC){aC.find(".note-holder").each(function(){var aD=M(this);aD.append(at.palette({colors:ao.colors,eventName:aD.data("event")}).render())})},click:function(aE){var aG=M(aE.target);var aC=aG.data("event");var aF=aG.data("value");if(aC&&aF){var aD=aC==="backColor"?"background-color":"color";var aI=aG.closest(".note-color").find(".note-recent-color");var aH=aG.closest(".note-color").find(".note-current-color-button");aI.css(aD,aF);aH.attr("data-"+aC,aF);aq.invoke("editor."+aC,aF)}}})]}).render()});aq.memo("button.ul",function(){return at.button({contents:at.icon(ao.icons.unorderedlist),tooltip:av.lists.unordered+ar("insertUnorderedList"),click:aq.createInvokeHandler("editor.insertUnorderedList")}).render()});aq.memo("button.ol",function(){return at.button({contents:at.icon(ao.icons.orderedlist),tooltip:av.lists.ordered+ar("insertOrderedList"),click:aq.createInvokeHandler("editor.insertOrderedList")}).render()});var aB=at.button({contents:at.icon(ao.icons.alignLeft),tooltip:av.paragraph.left+ar("justifyLeft"),click:aq.createInvokeHandler("editor.justifyLeft")});var ax=at.button({contents:at.icon(ao.icons.alignCenter),tooltip:av.paragraph.center+ar("justifyCenter"),click:aq.createInvokeHandler("editor.justifyCenter")});var ay=at.button({contents:at.icon(ao.icons.alignRight),tooltip:av.paragraph.right+ar("justifyRight"),click:aq.createInvokeHandler("editor.justifyRight")});var az=at.button({contents:at.icon(ao.icons.alignJustify),tooltip:av.paragraph.justify+ar("justifyFull"),click:aq.createInvokeHandler("editor.justifyFull")});var aA=at.button({contents:at.icon(ao.icons.outdent),tooltip:av.paragraph.outdent+ar("outdent"),click:aq.createInvokeHandler("editor.outdent")});var aw=at.button({contents:at.icon(ao.icons.indent),tooltip:av.paragraph.indent+ar("indent"),click:aq.createInvokeHandler("editor.indent")});aq.memo("button.justifyLeft",y.invoke(aB,"render"));aq.memo("button.justifyCenter",y.invoke(ax,"render"));aq.memo("button.justifyRight",y.invoke(ay,"render"));aq.memo("button.justifyFull",y.invoke(az,"render"));aq.memo("button.outdent",y.invoke(aA,"render"));aq.memo("button.indent",y.invoke(aw,"render"));aq.memo("button.paragraph",function(){return at.buttonGroup([at.button({className:"dropdown-toggle",contents:at.icon(ao.icons.alignLeft)+" "+at.icon(ao.icons.caret,"span"),tooltip:av.paragraph.paragraph,data:{toggle:"dropdown"}}),at.dropdown([at.buttonGroup({className:"note-align",children:[aB,ax,ay,az]}),at.buttonGroup({className:"note-list",children:[aA,aw]})])]).render()});aq.memo("button.height",function(){return at.buttonGroup([at.button({className:"dropdown-toggle",contents:at.icon(ao.icons.textHeight)+" "+at.icon(ao.icons.caret,"span"),tooltip:av.font.height,data:{toggle:"dropdown"}}),at.dropdownCheck({items:ao.lineHeights,checkClassName:ao.icons.menuCheck,className:"dropdown-line-height",click:aq.createInvokeHandler("editor.lineHeight")})]).render()});aq.memo("button.table",function(){return at.buttonGroup([at.button({className:"dropdown-toggle",contents:at.icon(ao.icons.table)+" "+at.icon(ao.icons.caret,"span"),tooltip:av.table.table,data:{toggle:"dropdown"}}),at.dropdown({className:"note-table",items:['<div class="note-dimension-picker">','  <div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"/>','  <div class="note-dimension-picker-highlighted"/>','  <div class="note-dimension-picker-unhighlighted"/>',"</div>",'<div class="note-dimension-display">1 x 1</div>'].join("")})],{callback:function(aC){var aD=aC.find(".note-dimension-picker-mousecatcher");aD.css({width:ao.insertTableMaxSize.col+"em",height:ao.insertTableMaxSize.row+"em"}).mousedown(aq.createInvokeHandler("editor.insertTable")).on("mousemove",an.tableMoveHandler)}}).render()});aq.memo("button.link",function(){return at.button({contents:at.icon(ao.icons.link),tooltip:av.link.link,click:aq.createInvokeHandler("linkDialog.show")}).render()});aq.memo("button.picture",function(){return at.button({contents:at.icon(ao.icons.picture),tooltip:av.image.image,click:aq.createInvokeHandler("imageDialog.show")}).render()});aq.memo("button.video",function(){return at.button({contents:at.icon(ao.icons.video),tooltip:av.video.video,click:aq.createInvokeHandler("videoDialog.show")}).render()});aq.memo("button.hr",function(){return at.button({contents:at.icon(ao.icons.minus),tooltip:av.hr.insert+ar("insertHorizontalRule"),click:aq.createInvokeHandler("editor.insertHorizontalRule")}).render()});aq.memo("button.fullscreen",function(){return at.button({className:"btn-fullscreen",contents:at.icon(ao.icons.arrowsAlt),tooltip:av.options.fullscreen,click:aq.createInvokeHandler("fullscreen.toggle")}).render()});aq.memo("button.codeview",function(){return at.button({className:"btn-codeview",contents:at.icon(ao.icons.code),tooltip:av.options.codeview,click:aq.createInvokeHandler("codeview.toggle")}).render()});aq.memo("button.redo",function(){return at.button({contents:at.icon(ao.icons.redo),tooltip:av.history.redo+ar("redo"),click:aq.createInvokeHandler("editor.redo")}).render()});aq.memo("button.undo",function(){return at.button({contents:at.icon(ao.icons.undo),tooltip:av.history.undo+ar("undo"),click:aq.createInvokeHandler("editor.undo")}).render()});aq.memo("button.help",function(){return at.button({contents:at.icon(ao.icons.question),tooltip:av.options.help,click:aq.createInvokeHandler("helpDialog.show")}).render()})};this.addImagePopoverButtons=function(){aq.memo("button.imageSize100",function(){return at.button({contents:'<span class="note-fontsize-10">100%</span>',tooltip:av.image.resizeFull,click:aq.createInvokeHandler("editor.resize","1")}).render()});aq.memo("button.imageSize50",function(){return at.button({contents:'<span class="note-fontsize-10">50%</span>',tooltip:av.image.resizeHalf,click:aq.createInvokeHandler("editor.resize","0.5")}).render()});aq.memo("button.imageSize25",function(){return at.button({contents:'<span class="note-fontsize-10">25%</span>',tooltip:av.image.resizeQuarter,click:aq.createInvokeHandler("editor.resize","0.25")}).render()});aq.memo("button.floatLeft",function(){return at.button({contents:at.icon(ao.icons.alignLeft),tooltip:av.image.floatLeft,click:aq.createInvokeHandler("editor.floatMe","left")}).render()});aq.memo("button.floatRight",function(){return at.button({contents:at.icon(ao.icons.alignRight),tooltip:av.image.floatRight,click:aq.createInvokeHandler("editor.floatMe","right")}).render()});aq.memo("button.floatNone",function(){return at.button({contents:at.icon(ao.icons.alignJustify),tooltip:av.image.floatNone,click:aq.createInvokeHandler("editor.floatMe","none")}).render()});aq.memo("button.removeMedia",function(){return at.button({contents:at.icon(ao.icons.trash),tooltip:av.image.remove,click:aq.createInvokeHandler("editor.removeMedia")}).render()})};this.addLinkPopoverButtons=function(){aq.memo("button.linkDialogShow",function(){return at.button({contents:at.icon(ao.icons.link),tooltip:av.link.edit,click:aq.createInvokeHandler("linkDialog.show")}).render()});aq.memo("button.unlink",function(){return at.button({contents:at.icon(ao.icons.unlink),tooltip:av.link.unlink,click:aq.createInvokeHandler("editor.unlink")}).render()})};this.build=function(aF,aw){for(var aG=0,az=aw.length;aG<az;aG++){var aD=aw[aG];var aE=aD[0];var aA=aD[1];var aC=at.buttonGroup({className:"note-"+aE}).render();for(var aB=0,ay=aA.length;aB<ay;aB++){var ax=aq.memo("button."+aA[aB]);if(ax){aC.append(typeof ax==="function"?ax():ax)}}aC.appendTo(aF)}};this.updateCurrentStyle=function(){var aA=aq.invoke("editor.currentStyle");this.updateBtnStates({".note-btn-bold":function(){return aA["font-bold"]==="bold"},".note-btn-italic":function(){return aA["font-italic"]==="italic"},".note-btn-underline":function(){return aA["font-underline"]==="underline"},".note-btn-subscript":function(){return aA["font-subscript"]==="subscript"},".note-btn-superscript":function(){return aA["font-superscript"]==="superscript"},".note-btn-strikethrough":function(){return aA["font-strikethrough"]==="strikethrough"}});if(aA["font-family"]){var aw=aA["font-family"].split(",").map(function(aB){return aB.replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,"")});var ay=z.find(aw,function(aB){return aj.isFontInstalled(aB)||z.contains(ao.fontNamesIgnoreCheck,aB)});ap.find(".dropdown-fontname li a").each(function(){var aB=(M(this).data("value")+"")===(ay+"");this.className=aB?"checked":""});ap.find(".note-current-fontname").text(ay)}if(aA["font-size"]){var az=aA["font-size"];ap.find(".dropdown-fontsize li a").each(function(){var aB=(M(this).data("value")+"")===(az+"");this.className=aB?"checked":""});ap.find(".note-current-fontsize").text(az)}if(aA["line-height"]){var ax=aA["line-height"];ap.find(".dropdown-line-height li a").each(function(){var aB=(M(this).data("value")+"")===(ax+"");this.className=aB?"checked":""})}};this.updateBtnStates=function(aw){M.each(aw,function(ax,ay){at.toggleBtnActive(ap.find(ax),ay())})};this.tableMoveHandler=function(ax){var aF=18;var az=M(ax.target.parentNode);var ay=az.next();var aE=az.find(".note-dimension-picker-mousecatcher");var aA=az.find(".note-dimension-picker-highlighted");var aB=az.find(".note-dimension-picker-unhighlighted");var aD;if(ax.offsetX===undefined){var aw=M(ax.target).offset();aD={x:ax.pageX-aw.left,y:ax.pageY-aw.top}}else{aD={x:ax.offsetX,y:ax.offsetY}}var aC={c:Math.ceil(aD.x/aF)||1,r:Math.ceil(aD.y/aF)||1};aA.css({width:aC.c+"em",height:aC.r+"em"});aE.data("value",aC.c+"x"+aC.r);if(3<aC.c&&aC.c<ao.insertTableMaxSize.col){aB.css({width:aC.c+1+"em"})}if(3<aC.r&&aC.r<ao.insertTableMaxSize.row){aB.css({height:aC.r+1+"em"})}ay.html(aC.c+" x "+aC.r)}};var p=function(aq){var ar=M.summernote.ui;var an=aq.layoutInfo.note;var ap=aq.layoutInfo.toolbar;var ao=aq.options;this.shouldInitialize=function(){return !ao.airMode};this.initialize=function(){ao.toolbar=ao.toolbar||[];if(!ao.toolbar.length){ap.hide()}else{aq.invoke("buttons.build",ap,ao.toolbar)}if(ao.toolbarContainer){ap.appendTo(ao.toolbarContainer)}an.on("summernote.keyup summernote.mouseup summernote.change",function(){aq.invoke("buttons.updateCurrentStyle")});aq.invoke("buttons.updateCurrentStyle")};this.destroy=function(){ap.children().remove()};this.updateFullscreen=function(at){ar.toggleBtnActive(ap.find(".btn-fullscreen"),at)};this.updateCodeview=function(at){ar.toggleBtnActive(ap.find(".btn-codeview"),at);if(at){this.deactivate()}else{this.activate()}};this.activate=function(at){var au=ap.find("button");if(!at){au=au.not(".btn-codeview")}ar.toggleBtn(au,true)};this.deactivate=function(at){var au=ap.find("button");if(!at){au=au.not(".btn-codeview")}ar.toggleBtn(au,false)}};var V=function(ap){var an=this;var aq=M.summernote.ui;var ar=ap.layoutInfo.editor;var ao=ap.options;var at=ao.langInfo;this.initialize=function(){var av=ao.dialogsInBody?M(document.body):ar;var au='<div class="form-group"><label>'+at.link.textToDisplay+'</label><input class="note-link-text form-control" type="text" /></div><div class="form-group"><label>'+at.link.url+'</label><input class="note-link-url form-control" type="text" value="http://" /></div>'+(!ao.disableLinkTarget?'<div class="checkbox"><label><input type="checkbox" checked> '+at.link.openInNewWindow+"</label></div>":"");var aw='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+at.link.insert+"</button>";this.$dialog=aq.dialog({className:"link-dialog",title:at.link.insert,fade:ao.dialogsFade,body:au,footer:aw}).render().appendTo(av)};this.destroy=function(){aq.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(av,au){av.on("keypress",function(aw){if(aw.keyCode===x.code.ENTER){au.trigger("click")}})};this.showLinkDialog=function(au){return M.Deferred(function(ay){var ax=an.$dialog.find(".note-link-text"),az=an.$dialog.find(".note-link-url"),aw=an.$dialog.find(".note-link-btn"),av=an.$dialog.find("input[type=checkbox]");aq.onDialogShown(an.$dialog,function(){ap.triggerEvent("dialog.shown");ax.val(au.text);ax.on("input",function(){aq.toggleBtn(aw,ax.val()&&az.val());au.text=ax.val()});if(!au.url){au.url=au.text||"http://";aq.toggleBtn(aw,au.text)}az.on("input",function(){aq.toggleBtn(aw,ax.val()&&az.val());if(!au.text){ax.val(az.val())}}).val(au.url).trigger("focus");an.bindEnterKey(az,aw);an.bindEnterKey(ax,aw);av.prop("checked",au.isNewWindow);aw.one("click",function(aA){aA.preventDefault();ay.resolve({range:au.range,url:az.val(),text:ax.val(),isNewWindow:av.is(":checked")});an.$dialog.modal("hide")})});aq.onDialogHidden(an.$dialog,function(){ax.off("input keypress");az.off("input keypress");aw.off("click");if(ay.state()==="pending"){ay.reject()}});aq.showDialog(an.$dialog)}).promise()};this.show=function(){var au=ap.invoke("editor.getLinkInfo");ap.invoke("editor.saveRange");this.showLinkDialog(au).then(function(av){ap.invoke("editor.restoreRange");ap.invoke("editor.createLink",av)}).fail(function(){ap.invoke("editor.restoreRange")})};ap.memo("help.linkDialog.show",ao.langInfo.help["linkDialog.show"])};var Z=function(ap){var an=this;var aq=M.summernote.ui;var ao=ap.options;this.events={"summernote.keyup summernote.mouseup summernote.change summernote.scroll":function(){an.update()},"summernote.dialog.shown":function(){an.hide()}};this.shouldInitialize=function(){return !z.isEmpty(ao.popover.link)};this.initialize=function(){this.$popover=aq.popover({className:"note-link-popover",callback:function(at){var au=at.find(".popover-content");au.prepend('<span><a target="_blank"></a>&nbsp;</span>')}}).render().appendTo("body");var ar=this.$popover.find(".popover-content");ap.invoke("buttons.build",ar,ao.popover.link)};this.destroy=function(){this.$popover.remove()};this.update=function(){if(!ap.invoke("editor.hasFocus")){this.hide();return}var ar=ap.invoke("editor.createRange");if(ar.isCollapsed()&&ar.isOnAnchor()){var au=d.ancestor(ar.sc,d.isAnchor);var at=M(au).attr("href");this.$popover.find("a").attr("href",at).html(at);var av=d.posFromPlaceholder(au);this.$popover.css({display:"block",left:av.left,top:av.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var G=function(ap){var an=this;var aq=M.summernote.ui;var ar=ap.layoutInfo.editor;var ao=ap.options;var at=ao.langInfo;this.initialize=function(){var ay=ao.dialogsInBody?M(document.body):ar;var aw="";if(ao.maximumImageFileSize){var av=Math.floor(Math.log(ao.maximumImageFileSize)/Math.log(1024));var ax=(ao.maximumImageFileSize/Math.pow(1024,av)).toFixed(2)*1+"  KMGTP"[av]+"B";aw="<small>"+at.image.maximumFileSize+" : "+ax+"</small>"}var au='<div class="form-group note-group-select-from-files"><label>'+at.image.selectFromFiles+'</label><input class="note-image-input form-control" type="file" name="files" accept="image/*" multiple="multiple" />'+aw+'</div><div class="form-group" style="overflow:auto;"><label>'+at.image.url+'</label><input class="note-image-url form-control col-md-12" type="text" /></div>';var az='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+at.image.insert+"</button>";this.$dialog=aq.dialog({title:at.image.insert,fade:ao.dialogsFade,body:au,footer:az}).render().appendTo(ay)};this.destroy=function(){aq.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(av,au){av.on("keypress",function(aw){if(aw.keyCode===x.code.ENTER){au.trigger("click")}})};this.show=function(){ap.invoke("editor.saveRange");this.showImageDialog().then(function(au){aq.hideDialog(an.$dialog);ap.invoke("editor.restoreRange");if(typeof au==="string"){ap.invoke("editor.insertImage",au)}else{ap.invoke("editor.insertImagesOrCallback",au)}}).fail(function(){ap.invoke("editor.restoreRange")})};this.showImageDialog=function(){return M.Deferred(function(aw){var ax=an.$dialog.find(".note-image-input"),au=an.$dialog.find(".note-image-url"),av=an.$dialog.find(".note-image-btn");aq.onDialogShown(an.$dialog,function(){ap.triggerEvent("dialog.shown");ax.replaceWith(ax.clone().on("change",function(){aw.resolve(this.files||this.value)}).val(""));av.click(function(ay){ay.preventDefault();aw.resolve(au.val())});au.on("keyup paste",function(){var ay=au.val();aq.toggleBtn(av,ay)}).val("").trigger("focus");an.bindEnterKey(au,av)});aq.onDialogHidden(an.$dialog,function(){ax.off("change");au.off("keyup paste keypress");av.off("click");if(aw.state()==="pending"){aw.reject()}});aq.showDialog(an.$dialog)})}};var A=function(ao){var ap=M.summernote.ui;var an=ao.options;this.shouldInitialize=function(){return !z.isEmpty(an.popover.image)};this.initialize=function(){this.$popover=ap.popover({className:"note-image-popover"}).render().appendTo("body");var aq=this.$popover.find(".popover-content");ao.invoke("buttons.build",aq,an.popover.image)};this.destroy=function(){this.$popover.remove()};this.update=function(aq){if(d.isImg(aq)){var ar=d.posFromPlaceholder(aq);this.$popover.css({display:"block",left:ar.left,top:ar.top})}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var H=function(ap){var an=this;var aq=M.summernote.ui;var ar=ap.layoutInfo.editor;var ao=ap.options;var at=ao.langInfo;this.initialize=function(){var av=ao.dialogsInBody?M(document.body):ar;var au='<div class="form-group row-fluid"><label>'+at.video.url+' <small class="text-muted">'+at.video.providers+'</small></label><input class="note-video-url form-control span12" type="text" /></div>';var aw='<button href="#" class="btn btn-primary note-video-btn disabled" disabled>'+at.video.insert+"</button>";this.$dialog=aq.dialog({title:at.video.insert,fade:ao.dialogsFade,body:au,footer:aw}).render().appendTo(av)};this.destroy=function(){aq.hideDialog(this.$dialog);this.$dialog.remove()};this.bindEnterKey=function(av,au){av.on("keypress",function(aw){if(aw.keyCode===x.code.ENTER){au.trigger("click")}})};this.createVideoNode=function(aA){var aI=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;var aw=aA.match(aI);var av=/\/\/instagram.com\/p\/(.[a-zA-Z0-9_-]*)/;var aN=aA.match(av);var aG=/\/\/vine.co\/v\/(.[a-zA-Z0-9]*)/;var ax=aA.match(aG);var aC=/\/\/(player.)?vimeo.com\/([a-z]*\/)*([0-9]{6,11})[?]?.*/;var aH=aA.match(aC);var ay=/.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/;var au=aA.match(ay);var aM=/\/\/v\.youku\.com\/v_show\/id_(\w+)=*\.html/;var aK=aA.match(aM);var aJ=/^.+.(mp4|m4v)$/;var aF=aA.match(aJ);var aE=/^.+.(ogg|ogv)$/;var aO=aA.match(aE);var aL=/^.+.(webm)$/;var aB=aA.match(aL);var aD;if(aw&&aw[1].length===11){var az=aw[1];aD=M("<iframe>").attr("frameborder",0).attr("src","//www.youtube.com/embed/"+az).attr("width","640").attr("height","360")}else{if(aN&&aN[0].length){aD=M("<iframe>").attr("frameborder",0).attr("src",aN[0]+"/embed/").attr("width","612").attr("height","710").attr("scrolling","no").attr("allowtransparency","true")}else{if(ax&&ax[0].length){aD=M("<iframe>").attr("frameborder",0).attr("src",ax[0]+"/embed/simple").attr("width","600").attr("height","600").attr("class","vine-embed")}else{if(aH&&aH[3].length){aD=M("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("src","//player.vimeo.com/video/"+aH[3]).attr("width","640").attr("height","360")}else{if(au&&au[2].length){aD=M("<iframe>").attr("frameborder",0).attr("src","//www.dailymotion.com/embed/video/"+au[2]).attr("width","640").attr("height","360")}else{if(aK&&aK[1].length){aD=M("<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen>").attr("frameborder",0).attr("height","498").attr("width","510").attr("src","//player.youku.com/embed/"+aK[1])}else{if(aF||aO||aB){aD=M("<video controls>").attr("src",aA).attr("width","640").attr("height","360")}else{return false}}}}}}}aD.removeAttr("width").removeAttr("height").addClass("embed-responsive-item");return aD[0]};this.show=function(){var au=ap.invoke("editor.getSelectedText");ap.invoke("editor.saveRange");this.showVideoDialog(au).then(function(aw){aq.hideDialog(an.$dialog);ap.invoke("editor.restoreRange");var av=an.createVideoNode(aw);if(av){ap.invoke("editor.insertNode",av)}}).fail(function(){ap.invoke("editor.restoreRange")})};this.showVideoDialog=function(au){return M.Deferred(function(av){var aw=an.$dialog.find(".note-video-url"),ax=an.$dialog.find(".note-video-btn");aq.onDialogShown(an.$dialog,function(){ap.triggerEvent("dialog.shown");aw.val(au).on("input",function(){aq.toggleBtn(ax,aw.val())}).trigger("focus");ax.click(function(ay){ay.preventDefault();av.resolve(aw.val())});an.bindEnterKey(aw,ax)});aq.onDialogHidden(an.$dialog,function(){aw.off("input");ax.off("click");if(av.state()==="pending"){av.reject()}});aq.showDialog(an.$dialog)})}};var f=function(ap){var an=this;var aq=M.summernote.ui;var ar=ap.layoutInfo.editor;var ao=ap.options;var at=ao.langInfo;this.createShortCutList=function(){var au=ao.keyMap[aj.isMac?"mac":"pc"];return Object.keys(au).map(function(aw){var ax=au[aw];var av=M('<div><div class="help-list-item"/></div>');av.append(M("<label><kbd>"+aw+"</kdb></label>").css({width:180,"margin-right":10})).append(M("<span/>").html(ap.memo("help."+ax)||ax));return av.html()}).join("")};this.initialize=function(){var av=ao.dialogsInBody?M(document.body):ar;var au=['<p class="text-center">','<a href="//summernote.org/" target="_blank">Summernote 0.7.4</a>  ','<a href="//github.com/summernote/summernote" target="_blank">Project</a>  ','<a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a>',"</p>"].join("");this.$dialog=aq.dialog({title:at.options.help,fade:ao.dialogsFade,body:this.createShortCutList(),footer:au,callback:function(aw){aw.find(".modal-body").css({"max-height":300,overflow:"scroll"})}}).render().appendTo(av)};this.destroy=function(){aq.hideDialog(this.$dialog);this.$dialog.remove()};this.showHelpDialog=function(){return M.Deferred(function(au){aq.onDialogShown(an.$dialog,function(){ap.triggerEvent("dialog.shown");au.resolve()});aq.showDialog(an.$dialog)}).promise()};this.show=function(){ap.invoke("editor.saveRange");this.showHelpDialog().then(function(){ap.invoke("editor.restoreRange")})}};var T=function(aq){var an=this;var ar=M.summernote.ui;var ao=aq.options;var ap=20;this.events={"summernote.keyup summernote.mouseup summernote.scroll":function(){an.update()},"summernote.change summernote.dialog.shown":function(){an.hide()},"summernote.focusout":function(at,au){if(aj.isFF){return}if(!au.relatedTarget||!d.ancestor(au.relatedTarget,y.eq(an.$popover[0]))){an.hide()}}};this.shouldInitialize=function(){return ao.airMode&&!z.isEmpty(ao.popover.air)};this.initialize=function(){this.$popover=ar.popover({className:"note-air-popover"}).render().appendTo("body");var at=this.$popover.find(".popover-content");aq.invoke("buttons.build",at,ao.popover.air)};this.destroy=function(){this.$popover.remove()};this.update=function(){var av=aq.invoke("editor.currentStyle");if(av.range&&!av.range.isCollapsed()){var au=z.last(av.range.getClientRects());if(au){var at=y.rect2bnd(au);this.$popover.css({display:"block",left:Math.max(at.left+at.width/2,0)-ap,top:at.top+at.height})}}else{this.hide()}};this.hide=function(){this.$popover.hide()}};var W=function(ao){var an=this;var ar=M.summernote.ui;var ap=5;var au=ao.options.hint||[];var at=ao.options.hintDirection||"bottom";var aq=M.isArray(au)?au:[au];this.events={"summernote.keyup":function(av,aw){if(!aw.isDefaultPrevented()){an.handleKeyup(aw)}},"summernote.keydown":function(av,aw){an.handleKeydown(aw)},"summernote.dialog.shown":function(){an.hide()}};this.shouldInitialize=function(){return aq.length>0};this.initialize=function(){this.lastWordRange=null;this.$popover=ar.popover({className:"note-hint-popover",hideArrow:true,direction:""}).render().appendTo("body");this.$popover.hide();this.$content=this.$popover.find(".popover-content");this.$content.on("click",".note-hint-item",function(){an.$content.find(".active").removeClass("active");M(this).addClass("active");an.replace()})};this.destroy=function(){this.$popover.remove()};this.selectItem=function(av){this.$content.find(".active").removeClass("active");av.addClass("active");this.$content[0].scrollTop=av[0].offsetTop-(this.$content.innerHeight()/2)};this.moveDown=function(){var ax=this.$content.find(".note-hint-item.active");var av=ax.next();if(av.length){this.selectItem(av)}else{var aw=ax.parent().next();if(!aw.length){aw=this.$content.find(".note-hint-group").first()}this.selectItem(aw.find(".note-hint-item").first())}};this.moveUp=function(){var aw=this.$content.find(".note-hint-item.active");var av=aw.prev();if(av.length){this.selectItem(av)}else{var ax=aw.parent().prev();if(!ax.length){ax=this.$content.find(".note-hint-group").last()}this.selectItem(ax.find(".note-hint-item").last())}};this.replace=function(){var av=this.$content.find(".note-hint-item.active");if(av.length){var aw=this.nodeFromItem(av);this.lastWordRange.insertNode(aw);n.createFromNode(aw).collapse().select();this.lastWordRange=null;this.hide();ao.invoke("editor.focus")}};this.nodeFromItem=function(av){var ay=aq[av.data("index")];var ax=av.data("item");var aw=ay.content?ay.content(ax):ax;if(typeof aw==="string"){aw=d.createText(aw)}return aw};this.createItemTemplates=function(aw,av){var ax=aq[aw];return av.map(function(aA,ay){var az=M('<div class="note-hint-item"/>');az.append(ax.template?ax.template(aA):aA+"");az.data({index:aw,item:aA});if(aw===0&&ay===0){az.addClass("active")}return az})};this.handleKeydown=function(av){if(!this.$popover.is(":visible")){return}if(av.keyCode===x.code.ENTER){av.preventDefault();this.replace()}else{if(av.keyCode===x.code.UP){av.preventDefault();this.moveUp()}else{if(av.keyCode===x.code.DOWN){av.preventDefault();this.moveDown()}}}};this.searchKeyword=function(aw,av,az){var ay=aq[aw];if(ay&&ay.match.test(av)&&ay.search){var ax=ay.match.exec(av);ay.search(ax[1],az)}else{az()}};this.createGroup=function(av,aw){var ax=M('<div class="note-hint-group note-hint-group-'+av+'"/>');this.searchKeyword(av,aw,function(ay){ay=ay||[];if(ay.length){ax.html(an.createItemTemplates(av,ay));an.show()}});return ax};this.handleKeyup=function(ax){if(z.contains([x.code.ENTER,x.code.UP,x.code.DOWN],ax.keyCode)){if(ax.keyCode===x.code.ENTER){if(this.$popover.is(":visible")){return}}}else{var ay=ao.invoke("editor.createRange").getWordRange();var aw=ay.toString();if(aq.length&&aw){this.$content.empty();var av=y.rect2bnd(z.last(ay.getClientRects()));if(av){this.$popover.hide();this.lastWordRange=ay;aq.forEach(function(aA,az){if(aA.match.test(aw)){an.createGroup(az,aw).appendTo(an.$content)}});if(at==="top"){this.$popover.css({left:av.left,top:av.top-this.$popover.outerHeight()-ap})}else{this.$popover.css({left:av.left,top:av.top+av.height+ap})}}}else{this.hide()}}};this.show=function(){this.$popover.show()};this.hide=function(){this.$popover.hide()}};M.summernote=M.extend(M.summernote,{version:"0.7.4",ui:S,plugins:{},options:{modules:{editor:D,clipboard:t,dropzone:F,codeview:J,statusbar:I,fullscreen:s,handle:ag,hintPopover:W,autoLink:ae,autoSync:al,placeholder:L,buttons:B,toolbar:p,linkDialog:V,linkPopover:Z,imageDialog:G,imagePopover:A,videoDialog:H,helpDialog:f,airPopover:T},buttons:{},lang:"en-US",toolbar:[["style",["style"]],["font",["bold","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture","video"]],["view",["fullscreen","codeview","help"]]],popover:{image:[["imagesize",["imageSize100","imageSize50","imageSize25"]],["float",["floatLeft","floatRight","floatNone"]],["remove",["removeMedia"]]],link:[["link",["linkDialogShow","unlink"]]],air:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]]},airMode:false,width:null,height:null,focus:false,tabSize:4,styleWithSpan:true,shortcuts:true,textareaAutoSync:true,direction:null,styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontSizes:["8","9","10","11","12","14","18","24","36"],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],tableClassName:"table table-bordered",insertTableMaxSize:{col:10,row:10},dialogsInBody:false,dialogsFade:false,maximumImageFileSize:null,callbacks:{onInit:null,onFocus:null,onBlur:null,onEnter:null,onKeyup:null,onKeydown:null,onSubmit:null,onImageUpload:null,onImageUploadError:null},codemirror:{mode:"text/html",htmlMode:true,lineNumbers:true},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"linkDialog.show"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"linkDialog.show"}},icons:{align:"note-icon-align",alignCenter:"note-icon-align-center",alignJustify:"note-icon-align-justify",alignLeft:"note-icon-align-left",alignRight:"note-icon-align-right",indent:"note-icon-align-indent",outdent:"note-icon-align-outdent",arrowsAlt:"note-icon-arrows-alt",bold:"note-icon-bold",caret:"note-icon-caret",circle:"note-icon-circle",close:"note-icon-close",code:"note-icon-code",eraser:"note-icon-eraser",font:"note-icon-font",frame:"note-icon-frame",italic:"note-icon-italic",link:"note-icon-link",unlink:"note-icon-chain-broken",magic:"note-icon-magic",menuCheck:"note-icon-check",minus:"note-icon-minus",orderedlist:"note-icon-orderedlist",pencil:"note-icon-pencil",picture:"note-icon-picture",question:"note-icon-question",redo:"note-icon-repeat",square:"note-icon-square",strikethrough:"note-icon-strikethrough",subscript:"note-icon-subscript",superscript:"note-icon-superscript",table:"note-icon-table",textHeight:"note-icon-text-height",trash:"note-icon-trash",underline:"note-icon-underline",undo:"note-icon-undo",unorderedlist:"note-icon-unorderedlist",video:"note-icon-video"}}})}));